<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
<meta property="og:type" content="website">
<meta property="og:title" content="「Riceのこと」">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="「Riceのこと」">
<meta property="og:description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rice March">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>「Riceのこと」</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">「Riceのこと」</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/19/spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/19/spring/" class="post-title-link" itemprop="url">Spring-sping</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-19 11:25:11 / 修改时间：14:01:58" itemprop="dateCreated datePublished" datetime="2020-03-19T11:25:11+08:00">2020-03-19</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Spring-Framework"><a href="#Spring-Framework" class="headerlink" title="Spring Framework"></a>Spring Framework</h2><ul>
<li><p>轻量级的“一站式”的企业级应用开发解决方案</p>
</li>
<li><p>免费开源</p>
</li>
<li><p>无需应用级服务器支持</p>
</li>
<li><p>非侵入式设计（Non-Intrusive）</p>
</li>
<li><p>基于依赖注入的核心机制降低了组件间的耦合</p>
</li>
<li><p>支持面向切面编程（AOP）设计</p>
</li>
<li><p>可与多种数据持久层技术无缝整合（mybatis、mangodb…）</p>
</li>
<li><p>组件化设计，可以选取使用所需组件</p>
</li>
<li><p>反应式编程</p>
<p>…..</p>
</li>
</ul>
<p><img src="/2020/03/19/spring/image-20200319112134346.png" alt="image-20200319112134346"></p>
<h2 id="Introduction-to-IoC"><a href="#Introduction-to-IoC" class="headerlink" title="Introduction to IoC"></a>Introduction to IoC</h2><p>(Inversion of Control):控制反转，程序设计思想</p>
<p>控制：创建所需对象的控制权</p>
<p>反转：将主动、被动关系调转</p>
<p>控制反转：由程序主动的创建所需的对象，变为程序被动接受所需对象</p>
<ul>
<li><p>DI(dependency injection)：依赖注入，组件由容器管理，在需要时由容器动态注入组件所需的其他组件。</p>
<p><kbd>Ioc == DI</kbd></p>
<h2 id="Ioc-Container"><a href="#Ioc-Container" class="headerlink" title="Ioc Container"></a>Ioc Container</h2></li>
</ul>
<p>可以实现依赖关系注入的容器，负责实例化、定位、配置应用程序所需对象、建立对象间的依赖关系，组装应用程序组件。</p>
<blockquote>
<p> 上古时代Metadata是xml配置文件，不是现在的注解。</p>
</blockquote>
<p><img src="/2020/03/19/spring/image-20200319114739415.png" alt="image-20200319114739415"></p>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><p><kbd>@Component</kbd>声明为组件</p>
<p><kbd>@Repository</kbd>声明为持久化组件(a mechanism for encapsulating storage, retrieval, and search behavior which emulates a collection of objects)</p>
<p><kbd>@Service</kbd> 声明为业务逻辑组件(“an operation offered as an interface that stands alone in the model, with no encapsulated state)</p>
<p><kbd>@Controller</kbd>声明为逻辑控制组件</p>
<p><kbd>@Bean</kbd>方法级，声明方法返回的对象，由Spring容器管理。当需注入非自定义组件时</p>
<blockquote>
<p>上面的可以自己自定义的类上使用注解，但比如想对一个localdate放入容器，loacldate是java的，当然不可能进java的源码中给他一个注解，当希望把一个自己无法声明的类型，一个现成的，第三方的类型如何创建出一个spring能够管理的组件，Bean就是这样的，简单来说在方法上添加一个注解，在方法返回的对象就会被spring注入容器中。</p>
</blockquote>
<p><kbd>@Configuration</kbd>声明为配置类组件（如swagger的配置类，springmvc的拦截器，关跨域）</p>
<h4 id="example-Service"><a href="#example-Service" class="headerlink" title="example:Service"></a>example:Service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Service &#123;</span><br><span class="line">    <span class="meta">@AliasFor</span>( </span><br><span class="line">        annotation = Component<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">    )</span></span><br><span class="line">    String value() default "";</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="example-Repository"><a href="#example-Repository" class="headerlink" title="example:Repository"></a>example:Repository</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Repository &#123;</span><br><span class="line">    <span class="meta">@AliasFor</span>(</span><br><span class="line">        annotation = Component<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">    )</span></span><br><span class="line">    String value() default "";</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组件注解，仅用于区分组件功能</p>
<p>注解本身，不实现任何特殊功能</p>
<h2 id="Bean-Scopes"><a href="#Bean-Scopes" class="headerlink" title="Bean Scopes"></a>Bean Scopes</h2><p>Scopes:Spring容器中bean相对应其他bean请求的可访问范围</p>
<ul>
<li><strong>Singleton(default)</strong>:无需保存任何数据</li>
<li>Prototype:原型模式</li>
<li>Request</li>
<li>Session</li>
<li>Application</li>
<li>Custom</li>
</ul>
<h3 id="The-Singleton-Scope"><a href="#The-Singleton-Scope" class="headerlink" title="The Singleton Scope"></a>The Singleton Scope</h3><p><code>单例 (Singleton)</code>，容器中仅存在bean的一个实例。生命周期由容器管理；即容器对所有注入请求使用相同实例</p>
<p><img src="/2020/03/19/spring/image-20200319122559545.png" alt="image-20200319122559545"></p>
<h3 id="The-Prototype-Scope"><a href="#The-Prototype-Scope" class="headerlink" title="The Prototype Scope"></a>The Prototype Scope</h3><p><code>原型(Prototype )</code>，容器不保存bean的实例，每次请求容器均创建一个新的实例</p>
<p><img src="/2020/03/19/spring/image-20200319122743273.png" alt="image-20200319122743273"></p>
<h2 id="Dependency-Injection"><a href="#Dependency-Injection" class="headerlink" title="Dependency Injection"></a>Dependency Injection</h2><p><kbd>@Autowired</kbd></p>
<p><code>org.springframework.beans.factory.annotation.Autowired</code></p>
<p><strong>基于类型注入</strong>(type-driven injection)</p>
<ul>
<li><p>构造函数级</p>
</li>
<li><p>方法级，修饰属性setter方法注入bean</p>
</li>
<li><p><strong>属性级</strong>，修饰属性，无需getter/setter方法即可注入bean</p>
</li>
<li><p>Required，默认为true，如果容器注入属性对象为null，抛出异常，容器无法启动(如果有错误，容器都启动不起来，这样可以避免很多错误)</p>
</li>
</ul>
<p>当前Spring推荐，基于组件的构造函数直接注入所需的其他组件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PrototypeBean prototypeBean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**以下是当前官方推荐写法，上下等效,但下比较麻烦**/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> PrototypeBean prototypeBean;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SingletonBean</span><span class="params">(PrototypeBean prototypeBean)</span> </span>&#123;<span class="comment">//spring自动注入</span></span><br><span class="line">        <span class="keyword">this</span>.prototypeBean = prototypeBean;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>实现：单例模式和原型模式的区别</strong></p>
<p><img src="/2020/03/19/spring/image-20200319124137470.png" alt="image-20200319124212244"></p>
<ul>
<li><p>Spring容器启动时，扫描并创建指定路径下全部组件的实例</p>
</li>
<li><p>以键值对保存实例，键为类名首字母小写（<strong>不是全限定性类名</strong>），值为容器创建的对象</p>
</li>
</ul>
<p><img src="/2020/03/19/spring/image-20200319124427436.png" alt="image-20200319124427436"></p>
<p><strong>UserDao虽然是不同类型(类型为全限定性类名)，但容器创建时使用的默认名称相同，因此异常</strong></p>
<p>即，在不同包下的同名组件，其全限定性类名不同。但是，Spring容器仍无法启动。因此，<strong>组件名称不要相同</strong></p>
<p><strong>可以通过显示的指定组件的名称</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当前在dependencies.dao包下</span></span><br><span class="line"><span class="meta">@Repository</span>(<span class="string">"dao.userdao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure>

<p><strong>针对于中大型项目中的接口的使用</strong></p>
<ul>
<li><p>当基于接口类型注入对象，<strong>声明实现类为组件</strong></p>
</li>
<li><p>容器自动创建实现类对象，按接口类型注入</p>
</li>
<li><p>当容器中存在接口的多个实现类时，抛出异常</p>
</li>
</ul>
<p><img src="/2020/03/19/spring/image-20200319131226137.png" alt="image-20200319131226137"></p>
<p><kbd>@Primary<kbd></kbd></kbd></p>
<p><code>org.springframework.context.annotation.Primary</code>，基于类型的注入，当有多个候选匹配时(例如接口有多个实现类时)，注入此实现类对象</p>
<p><img src="/2020/03/19/spring/image-20200319131428598.png" alt="image-20200319131428598"></p>
<p><KBD>@Qualifier<KBD></KBD></KBD></p>
<p><code>org.springframework.beans.factory.annotation.Qualifier</code>，当需要使用<KBD>@Autowired<KBD>基于类型的注入，但又需要选择合适实现类时声明注入对象名称</KBD></KBD></p>
<p><img src="/2020/03/19/spring/image-20200319131621156.png" alt="image-20200319131621156"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/c%E8%AF%AD%E8%A8%80-%E8%A1%A5%E5%AE%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/c%E8%AF%AD%E8%A8%80-%E8%A1%A5%E5%AE%8C/" class="post-title-link" itemprop="url">C 语言 相关知识</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 21:09:31 / 修改时间：21:17:16" itemprop="dateCreated datePublished" datetime="2020-03-18T21:09:31+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C语言中的-和-amp-符号"><a href="#C语言中的-和-amp-符号" class="headerlink" title="C语言中的*和&amp;符号"></a>C语言中的*和&amp;符号</h1><p>之前对*和&amp;符号一直理解的比较浅显。只知道：<br>*p好像表示的是一个指针；<br>&amp;p表示的是一个地址。<br>然而这次当遇到了下面这个情况的时候： </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">int</span> *b = &amp;a；</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(“%d\n”, a); </span><br><span class="line"><span class="built_in">printf</span>(“%d\n”, &amp;a); </span><br><span class="line"><span class="built_in">printf</span>(“%d\n”, b); </span><br><span class="line"><span class="built_in">printf</span>(“%d\n”, *b);</span><br></pre></td></tr></table></figure>
<p>结果： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">10 </span><br><span class="line">6487620 </span><br><span class="line">6487620 </span><br><span class="line">10</span><br></pre></td></tr></table></figure>



<p>一脸懵逼，为什么&amp;a和*b的值不是一样？这才发现自己其实一点都没有搞懂。</p>
<p>经过学习后，总结出来：<br>变量a 本质上代表一个存储单元。CPU通过该存储单元的地址访问该存储单元中的数据。所以a本来代表两个值：存储单元的地址和储单元中的数据。于是就有了二异性。为了消除这种二义性，C语言规定a表示存储单元中的数据，&amp;a表示存储单元的地址。<br>a存储单元中的数据可以是一个普通数值，也可以是另一个存储单元的地址，比如：a = &b; 语句就是将b的存储单元的地址存入a存储单元中。C语言规定<strong>*a</strong>代表a中存储的地址对应的存储单元中的数据，也就是访问<em>a就等于访问b，于是</em>a提供了通过a访问b中的数据的手段。</p>
<p>a表示a对应的存储单元中的数据。<br>&amp;a表示a对应的存储单元的地址。<br><em>a表示：首先，要求a对应的存储单元中的数据 一定是另一个存储单元的地址。<br>于是，</em>a表示另一个存储单元中的数据。<br>当a声明的类型是int时，a中存储的是一个整数数值，通过a可以访问（读取或修改）这个数值。<br>当a声明的类型是int <em>时，a中存储的是一个存储单元的*</em>地址<strong>，而该存储单元中存储的数据是一个整数数值；通过<em>a可以访问（读取或修改）这个数值。a == &amp;</em>a 都是该存储单元的地址。<br>当a声明的类型是int</strong>时，a中存储的是一个存储单元的地址，而该存储单元中存储的数据是另外一个存储单元的地址，另外这个存储单元中存储的是一个整数数值；通过**a可以访问（读取或修改）这个数值。<br>…</p>
<p>最后，在C语言里地址叫指针。还有，在C语言中的数组本质上其实也是指针，即：*a 等同于 a[]。</p>
<p>转载自 <a href="https://blog.csdn.net/qq_21583681/article/details/78572009" target="_blank" rel="noopener">https://blog.csdn.net/qq_21583681/article/details/78572009</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/Spriiiiing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/Spriiiiing/" class="post-title-link" itemprop="url">Spriiiiing!</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 19:02:04 / 修改时间：19:04:28" itemprop="dateCreated datePublished" datetime="2020-03-18T19:02:04+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>依然是不知道自己猴年马月留下的spring笔记，很碎，挠头（一起放到博客里好了）</p>
</blockquote>
<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="前期储备"><a href="#前期储备" class="headerlink" title="前期储备"></a>前期储备</h2><ol>
<li>解耦：</li>
</ol>
<p>降低程序之间的依赖关系，类之间的依赖，对象间的依赖</p>
<p>在实际开发中应该做到 编译时不依赖 运行时才依赖</p>
<p>第一步：使用反射创建对象，避免使用new关键字。</p>
<p>第二步：通过读取配置文件来获取要创建的对象全限定类目</p>
<ol start="2">
<li><p>接口命名</p>
<p>在最前面加上<code>I</code> 例如 <code>public interface IAccountService{}</code></p>
</li>
<li><p>Bean</p>
<p>在计算机英语中，有可重用组件的含义。</p>
</li>
<li><p>控制反转(IOC inversion of control)</p>
<p>削减计算机程序的耦合</p>
<p><img src="/2020/03/18/Spriiiiing/C:%5CUsers%5Cdell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200101105307536.png" alt="image-20200101105307536"></p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> IAccountDao accountDao = <span class="keyword">new</span> AccountDaoImpl();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> IAccountDao accountDao = (IAccountDao)BeanFactory.getBean(<span class="string">"accountDao"</span>);</span><br><span class="line"><span class="comment">/* 控制反转</span></span><br><span class="line"><span class="comment">*  在通过new 方法时 accountDao有主动权可以new任何的符合的内容，有独立的自主控制权</span></span><br><span class="line"><span class="comment">*  但是通过工厂方法后，新产生的对象的权利已经被限定在工厂内的内容，</span></span><br><span class="line"><span class="comment">*  他没有独立的自主控制权。这就是一种控制反转。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>ioc是key-value类型的</p>
<h2 id="Bean"><a href="#Bean" class="headerlink" title="Bean"></a>Bean</h2><h3 id="1-创建Bean的三种方法"><a href="#1-创建Bean的三种方法" class="headerlink" title="1. 创建Bean的三种方法"></a>1. 创建Bean的三种方法</h3><ul>
<li><p>使用默认构造函数创建。</p>
<p>在spring的配置文件中使用bean标签，配以id和class属性之后，且没有其他属性和标签时，采用的就是默认构造函数创建bean对象，此时如果类中没有默认构造函数，则对象无法创建</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用普通工厂中的方法创建对象（使用某个类中的方法创建对象，并存入spring容器）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactory"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.InstanceFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">facotry-bean</span>=<span class="string">"instanceFactory"</span> <span class="attr">facotry-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用工厂方法中的静态方法创建对象（使用某个类中的静态方法创建对象，并存入spring容器）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.factory.StaticFactory"</span> <span class="attr">factory-mothed</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>后面两种可以用来取jar包中的类。</p>
</li>
</ul>
<p>​    </p>
<h3 id="2-bean的作用范围调整"><a href="#2-bean的作用范围调整" class="headerlink" title="2. bean的作用范围调整"></a>2. bean的作用范围调整</h3><p>bean的标签scope属性,取值：</p>
<ul>
<li><p>singleton：单例的（默认值） - </p>
</li>
<li><p>prototype：多例的 - </p>
</li>
<li><p>request：作用于web应用的请求范围 - </p>
</li>
<li><p>session：作用于web应用的会话范围 - </p>
</li>
<li><p>global-session：作用于集群环境的会话范围（全局会话范围），当不是集群时，他就是session</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="3">
<li><p>bean对象的生命周期</p>
<p>单例对象：</p>
<ul>
<li><p>出生：当容器创建时对象出生</p>
</li>
<li><p>活着：只要容器还在，对象一直活着</p>
</li>
<li><p>死亡：容器销毁，对象消亡</p>
<p>总结：单例对象的生命周期和容器相同</p>
</li>
</ul>
<p>多例对象</p>
<ul>
<li>出生：当我们使用对象时spring框架为我们创建</li>
<li>活着：对象只要是在使用的过程中就一直活着</li>
<li>死亡：当对象长时间不适用，且没有别的对象引用时，由java的垃圾回收器回收。</li>
</ul>
</li>
</ol>
<h2 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h2><ol>
<li><p>构造函数注入</p>
<p>使用标签：constructor-arg</p>
<p>标签的属性：</p>
<ul>
<li><p>type：用于指定注入的数据的数据类型</p>
</li>
<li><p>index：用于指定要注入的数据给构造函数中指定索引位置的参数赋值</p>
</li>
<li><p>name：用于指定构造函数中指定名称的参数赋值</p>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>value：用于提供基本类型和string类型的数据</p>
</li>
<li><p>ref：用于指定其他bean类型的数据。在spring的ioc核心容器中出现过得bean对象</p>
</li>
</ul>
<ol start="2">
<li><p>set方法注入</p>
<p>使用标签：property </p>
</li>
<li><p>复杂类型的注入/集合类型的注入</p>
<p>用于给List结构集合注入的标签：</p>
<ul>
<li>list array set</li>
</ul>
<p>用于给Map结构集合注入的标签：</p>
<ul>
<li>map props</li>
</ul>
<p>结构相同，标签可以互换</p>
</li>
</ol>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><ol>
<li>用于创建对象的（和xml配置文件中编写的<code>&lt;bean&gt;</code>标签的功能是一样的</li>
</ol>
<p><KBD>@Component:用于把当前类对象存入spring容器中。</KBD></p>
<ul>
<li><p>属性：</p>
<p>value：用于指定bean的id。当我们不写时，它的默认值是当前类型，且首字母小写</p>
<p><code>@Compontent(value=&quot;accountService&quot;)</code></p>
</li>
</ul>
<p><KBD>@Controller:一般用在表现层</KBD></p>
<p><KBD>@Service：一般用在业务层</KBD></p>
<p><KBD>@Repository：一般用于持久层</KBD></p>
<p>以上三个注解的作用和<KBD>@Component是一模一样的，只是为了使我们的三层对象更加清晰。</KBD></p>
<ol start="2">
<li><p>用于注入数据</p>
<p>他的作用就和在xml配置文件中的bean标签写入一个<code>&lt;property</code>标签的作用是一样的</p>
<p><KBD>@Autowired：自动按照类型注入。只要容器中有唯一的一个bean对象类型和要注入的变量类型匹配，就可以注入成功。</KBD></p>
<p>出现位置：可以是变量上，也可以是方法上</p>
<p>细节：在使用注解注入时，set方法就不是必须的了</p>
<blockquote>
<p>先是 byType 然后是byName</p>
</blockquote>
<p><KBD>@Qualifier：在按照类型注入的基础上，在按照名称注入，他在给类成员注入时不能单独使用。但是在给方法参数注入时可以。</KBD></p>
<p>属性： <code>value</code>：用于指定注入的bean的id</p>
<p>ex：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"accountDao1"</span>)</span><br></pre></td></tr></table></figure>

<p><KBD>@Resource:直接按照bean的id注入，他是可以独立使用的</KBD></p>
<p>属性：name：用于指定bean的id。</p>
<p>以上三个注解只能注入其他bean类型数据，基本类型和String类型不能实现。集合类型只能通过xml来实现。</p>
<p><KBD>@value：用于注入基本类型和String类型的数据</KBD></p>
<p>属性：value：用于指定数据的值，他可以使用spring中的spEL（<code>${表达式}</code>）</p>
</li>
</ol>
<h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h3 id="1、主程序类，主入口类"><a href="#1、主程序类，主入口类" class="headerlink" title="1、主程序类，主入口类"></a>1、主程序类，主入口类</h3><p>   <KBD>@SpringBootApplication：SpringBoot应用 标注在某个类上 ，说明就是主配置类，运行该类的main方法，</KBD></p>
<p>@SpringBootApplication<br>   public class DemoApplication {</p>
<pre><code>public static void main(String[] args) {
    SpringApplication.run(DemoApplication.class, args);
}</code></pre><p>   }</p>
<p>   <strong>@SpringBootApplication</strong>内部源码：</p>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"> <span class="meta">@Documented</span></span><br><span class="line"> <span class="meta">@Inherited</span></span><br><span class="line"> <span class="meta">@SpringBootConfiguration</span></span><br><span class="line"> <span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"> <span class="meta">@ComponentScan</span>(</span><br><span class="line">     excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">     type = FilterType.CUSTOM,</span><br><span class="line">     classes = &#123;TypeExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class"> ), @<span class="title">Filter</span>(</span></span><br><span class="line"><span class="class">     <span class="title">type</span> </span>= FilterType.CUSTOM,</span><br><span class="line">     classes = &#123;AutoConfigurationExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class"> )&#125;</span></span><br><span class="line"><span class="class"> )</span></span><br><span class="line"><span class="class"> <span class="title">public</span> @<span class="title">interface</span> <span class="title">SpringBootApplication</span> </span>&#123;</span><br></pre></td></tr></table></figure>


<p>   <KBD>@SpringBootConfiguration：Spring boot的内置类</KBD></p>
<pre><code>标注在某个类上，表示这是一个spring boot的配置

**@SpringBootconfiguration**源码：</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration &#123;</span><br></pre></td></tr></table></figure>

<p><KBD>@Configuration：配置类上来标注这个注解：(spring注解)</KBD></p>
<pre><code>配置类 &lt;------&gt; 配置文件(xml)：配置类也是个容器中的组件**@component**</code></pre><p><KBD>@EnableAutoConfiguration:开启自动配置功能；</KBD></p>
<blockquote>
<p><strong>@EnableAutoConfiguration源码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;AutoConfigurationImportSelector<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">EnableAutoConfiguration</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<p><strong>@AutoConfigurationPackage</strong>：自动配置包</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;Registrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">AutoConfigurationPackage</span> </span>&#123;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>@Import({Registrar.class})</strong>：给容器中导入一个组件，由{Registrar.class}</p>
</blockquote>
<p><strong>@Import({AutoConfigurationImportSelector.class})</strong>:给容器中导入组件</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoConfigurationImportSelector</span> <span class="keyword">implements</span> <span class="title">DeferredImportSelector</span>, <span class="title">BeanClassLoaderAware</span>, <span class="title">ResourceLoaderAware</span>, <span class="title">BeanFactoryAware</span>, <span class="title">EnvironmentAware</span>, <span class="title">Ordered</span> </span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String[] selectImports(AnnotationMetadata annotationMetadata) &#123;</span><br><span class="line">     <span class="keyword">if</span> (!<span class="keyword">this</span>.isEnabled(annotationMetadata)) &#123;</span><br><span class="line">         <span class="keyword">return</span> NO_IMPORTS;</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         AutoConfigurationMetadata autoConfigurationMetadata = AutoConfigurationMetadataLoader.loadMetadata(<span class="keyword">this</span>.beanClassLoader);</span><br><span class="line">         AutoConfigurationImportSelector.AutoConfigurationEntry autoConfigurationEntry = <span class="keyword">this</span>.getAutoConfigurationEntry(autoConfigurationMetadata, annotationMetadata);</span><br><span class="line">         <span class="keyword">return</span> StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>将所有需要导入的组件以全类名的方法返回，这些组件就会添加到容器中，</p>
<p>会给容器导入非常多的自动配置类（xxxAutoConfiguration）；</p>
<p>就是容器中导入了这个场景所需要的所有组件，并配置好这些组件</p>
<p>有了自动配置类，免去了我们手动编写配置注入功能组件等的工作。</p>
</blockquote>
</blockquote>
<h1 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello world"></a>Hello world</h1><p>默认生成的spring boot项目：</p>
<ul>
<li>主程序已经生成好了，我们只需要我们自己的逻辑</li>
<li>resources文件夹中目录结构<ul>
<li>static：保存所有的静态资源；js css images</li>
<li>templates：保存所有的模板引擎；（spring boot 默认jar使用内嵌的tomcat，默认不支持jsp页面）；可以使用模板引擎（freemarker，thymeleft）</li>
<li>application.properties:Spiring Boot 应用的配置文件；可以修改一下默认配置（<code>server.port = 8081</code>)</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个类的所有方法返回的数据直接写给浏览器，（如果对象，转为json数据）</span></span><br><span class="line"><span class="comment">/*@ResponBody</span></span><br><span class="line"><span class="comment">@Controller*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span></span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello world quick"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>1、 配置文件</p>
<p><code>application.properties</code></p>
<p><code>application.yaml</code>：yaml以数据为中心</p>
<blockquote>
<p>使用缩进表示层级关系</p>
<p>缩进只能用空格不能用tab</p>
<p>缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</p>
<p>大小写敏感</p>
<blockquote>
<p>支持数据结构</p>
<p>（对象：键值对的集合、</p>
<p>数组：一组按次序排列的值、</p>
<p>字面量：单个的不可再分的值</p>
</blockquote>
</blockquote>
<p>配置的作用：修改springboot自动配置的默认值；springboot在底层给我们配置好了。</p>
<p> <KBD>@ConfigurationProperties：告诉Spring Boot将本类中的所有属性和配置文件中相关的配置进行绑定</KBD></p>
<p>导入配置文件处理器</p>
<p> <a href="https://www.cnblogs.com/fnlingnzb-learner/p/9723834.html" target="_blank" rel="noopener">@Autowired用法详解</a></p>
<p><KBD>@Autowired注释，它可以对类成员变量、方法及构造函数进行标注，完成自动装配的工作。 通过 <KBD>@Autowired的使用来消除 set ，get方法。在使用<KBD>@Autowired之前，我们对一个bean配置起属性时，是这用</KBD></KBD></KBD></p>
<p>@PropertySource &amp; @ImportResource</p>
<p>@PropertySource: 加载指定的配置文件（<code>@PropertySource(value={})</code><br>@ImportResource:导入Spring的配置文件，让配置文件里面的内容生效</p>
<p>Spring推荐的给容器中添加组件的方法：推荐使用全注解的方式<br>1、配置类====Spring配置文件<br>2、使用@Bean来给容器添加组件</p>
<h3 id="配置文件占位符"><a href="#配置文件占位符" class="headerlink" title="配置文件占位符"></a>配置文件占位符</h3><p>1、随机数</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">$&#123;random.value&#125;</span></span><br><span class="line"><span class="attr">$&#123;random.int&#125;</span></span><br><span class="line"><span class="attr">$&#123;random.long&#125;</span></span><br></pre></td></tr></table></figure>

<p>2、占位符获取之前的值，如果没有可以使用：指定默认值</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">person.last-name</span>=<span class="string">张三$&#123;random.uuid&#125;</span></span><br><span class="line"><span class="meta">person.dog.name</span>=<span class="string">$&#123;person.hell0:hello&#125;_dog</span></span><br></pre></td></tr></table></figure>



<h2 id="Spring-Boot-与日志："><a href="#Spring-Boot-与日志：" class="headerlink" title="Spring Boot 与日志："></a>Spring Boot 与日志：</h2><blockquote>
<p>日志框架：写一个统一的接口层，（日志门面） （日志实现）</p>
</blockquote>
<p>日志门面：slf4j</p>
<p>日志实现：Logback  </p>
<p>别的日志实现 通过中间转换包来伪装（狸猫换太子），引入其他框架时，只需要把别的框架的默认日志包移除掉</p>
<h1 id="Spring-Boot-与-Web"><a href="#Spring-Boot-与-Web" class="headerlink" title="Spring Boot 与 Web"></a>Spring Boot 与 Web</h1><p>对静态资源的映射规则：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">                logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Duration cachePeriod = <span class="keyword">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line">                CacheControl cacheControl = <span class="keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br><span class="line">                <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</span><br><span class="line">                    <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="keyword">new</span> String[]&#123;<span class="string">"/webjars/**"</span>&#125;).addResourceLocations(<span class="keyword">new</span> String[]&#123;<span class="string">"classpath:/META-INF/resources/webjars/"</span>&#125;).setCachePeriod(<span class="keyword">this</span>.getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">                <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">                    <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="keyword">new</span> String[]&#123;staticPathPattern&#125;).addResourceLocations(WebMvcAutoConfiguration.getResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations())).setCachePeriod(<span class="keyword">this</span>.getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext, FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> </span>&#123;</span><br><span class="line">            WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="keyword">new</span> WelcomePageHandlerMapping(<span class="keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, <span class="keyword">this</span>.getWelcomePage(), <span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">            welcomePageHandlerMapping.setInterceptors(<span class="keyword">this</span>.getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">            <span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<p>1、所有/webjars/**，都去classpath:/META-INF/resources/webjars/找资源</p>
<p>webjars：以jar包的方式引入静态资源</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        引入jQuery webjar--&gt;</span>    在访问的时候只用写webjars下面的资源名称</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>     </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、/**访问当前项目的任何资源，（今天资源的文件夹）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"classpath:/META-INF/resources/"</span>,</span><br><span class="line"><span class="string">"classpath:/resources/"</span>, </span><br><span class="line"><span class="string">"classpath:/static/"</span>,</span><br><span class="line"><span class="string">"classpath:/public/"</span>,</span><br><span class="line"><span class="string">"/"</span>:当前项目的根路径</span><br></pre></td></tr></table></figure>

<p>3.欢迎页：静态资源文件夹下的所有index.html页面，被“/**”映射；</p>
<p>4.所有的**/favicon.ico都是在静态资源文件下找；</p>
<h4 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h4><p>（jsp，thymeleaf）</p>
<p>springboot推荐使用的是thymeleaf，语法更简单，功能更强大。</p>
<h5 id="1、映入thymeleaf"><a href="#1、映入thymeleaf" class="headerlink" title="1、映入thymeleaf"></a>1、映入thymeleaf</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入thymeleaf--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="thymeleaf自动渲染"><a href="#thymeleaf自动渲染" class="headerlink" title="thymeleaf自动渲染"></a>thymeleaf自动渲染</h5><p>只要</p>
<p>我们把HTML放在classpath:/templates/，thymeleaf就会自动渲染<br>1、导入thymeleaf的名称空间</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、使用thymeleaf语法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我懵了<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"success"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>1th:text:改变当前元素里面的文本内容</p>
<p>th:任意html属性：来替换原生属性的值</p>
<table>
<thead>
<tr>
<th align="left">Order</th>
<th align="left">Feature</th>
<th align="left">Attributes</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">Fragment inclusion</td>
<td align="left"><code>th:insert</code> <code>th:replace</code></td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">Fragment iteration</td>
<td align="left"><code>th:each</code></td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">Conditional evaluation</td>
<td align="left"><code>th:if</code> <code>th:unless</code> <code>th:switch</code> <code>th:case</code></td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">Local variable definition</td>
<td align="left"><code>th:object</code> <code>th:with</code></td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">General attribute modification</td>
<td align="left"><code>th:attr</code> <code>th:attrprepend</code> <code>th:attrappend</code></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">Specific attribute modification</td>
<td align="left"><code>th:value</code> <code>th:href</code> <code>th:src</code> <code>...</code></td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">Text (tag body modification)</td>
<td align="left"><code>th:text</code> <code>th:utext</code></td>
</tr>
<tr>
<td align="left">8</td>
<td align="left">Fragment specification</td>
<td align="left"><code>th:fragment</code></td>
</tr>
<tr>
<td align="left">9</td>
<td align="left">Fragment removal</td>
<td align="left"><code>th:remove</code></td>
</tr>
</tbody></table>
<ol start="2">
<li><p>表达式语法</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">-</span> <span class="string">Simple expressions: #表达式语法</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Variable Expressions: `$&#123;...&#125;`</span></span><br><span class="line"><span class="comment">  			#获取对象的属性 调用方法</span></span><br><span class="line"><span class="comment">  			#内置的基本对象</span></span><br><span class="line"><span class="comment">  			#内置的工具对象</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Selection Variable Expressions: `*&#123;...&#125;`</span></span><br><span class="line"><span class="comment">  #选择表达式</span></span><br><span class="line"><span class="comment">  	#和$&#123;&#125;</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Message Expressions: `#&#123;...&#125;`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Link URL Expressions: `@&#123;...&#125;`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Fragment Expressions: `~&#123;...&#125;`</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Literals</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Text literals: `'one text'`, `'Another one!'`,…</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Number literals: `0`, `34`, `3.0`, `12.3`,…</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Boolean literals: `true`, `false`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Null literal: `null`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Literal tokens: `one`, `sometext`, `main`,…</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Text operations:</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">String concatenation: `+`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Literal substitutions: `|The name is $&#123;name&#125;|`</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Arithmetic operations:</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Binary operators: `+`, `-`, `*`, `/`, `%`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Minus sign (unary operator): `-`</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Boolean operations:</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Binary operators: `and`, `or`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Boolean negation (unary operator): `!`, `not`</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Comparisons and equality:</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Comparators: `&gt;`, `&lt;`, `&gt;=`, `&lt;=` (`gt`, `lt`, `ge`, `le`)</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Equality operators: `==`, `!=` (`eq`, `ne`)</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Conditional operators:</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">If-then: `(if) ? (then)`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">If-then-else: `(if) ? (then) : (else)`</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">Default: `(value) ?: (defaultvalue)`</span></span><br><span class="line"><span class="meta">-</span> <span class="string">Special tokens:</span></span><br><span class="line">  <span class="meta">-</span> <span class="string">No-Operation: `_`</span></span><br></pre></td></tr></table></figure>





</li>
</ol>
<h1 id="Spring-MVC-自动配置"><a href="#Spring-MVC-自动配置" class="headerlink" title="Spring MVC 自动配置"></a>Spring MVC 自动配置</h1><p>   ContentNegotiatingViewResolver：组合所有的视图解析器的；</p>
<p>   如何定制：我们可以之间给容器中添加一个视图解析器；自动的将其组合起来</p>
<p>   自动注册：</p>
<p>   Converter：转换器；public String hello(User user)：类型转换使用Converter</p>
<p>   Formatter：格式化器；2020-01-02 === Date；</p>
<p>   自己也可以添加格式化器 转换器，自己只需要放在容器中即可</p>
<p><strong><em>HttpMessageConverters</em></strong></p>
<ul>
<li><p><code>HttpMessageConverters</code>: SpringMVC用来转换Http请求和响应的；User—json；</p>
</li>
<li><p><code>HttpMessageConverters</code>:是从容器中确定的；获取所有的HttpMessageConverters；</p>
<p>自己给容器中添加HttpMessageConverters，只需要将自己的组件注册到容器中</p>
</li>
</ul>
<p><strong>编写一个配置类（@Configuration），是WebMvcConfigurer类型的，不能标注@EnableWebMVC</strong></p>
<p>既保留了所有的自动配置，也能用我们扩展的配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用WebMvcConfigurer可以扩展SpringMVC的功能</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//浏览器发送 /ricemarch 请求也来到success</span></span><br><span class="line">        registry.addViewController(<span class="string">"/ricemarch"</span>)</span><br><span class="line">                .setViewName(<span class="string">"success"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>国际化</p>
<p>1、配置</p>
<p>2、使用ResoureBunldeMaessage管理国际化资源文件</p>
<p>3、在页面取出使用fmt:message取出国际化内容</p>
<p><img src="/2020/03/18/Spriiiiing/C:%5CUsers%5Cdell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200103171241199.png" alt="image-20200103171241199"></p>
<p>2、SpringBoot自动配置好了管理国际化资源文件的组件；（MessageSourceAutoConfiguration）</p>
<p>3、去页面获取国际化的值（<code>#{ }</code>)</p>
<blockquote>
<p>记得properties用utf-8</p>
</blockquote>
<p>原理：国际化Locale（区域信息对象）；LocaleResolver（获取区域对象）</p>
<p>默认的区域信息请求器根据默认自带的请求头来选择语言</p>
<p>4、点击链接选择LocaleResolver</p>
<hr>
<p>登录模块：</p>
<p>模板引擎页面修改以后，要实时生效（禁用模板引擎的缓存、页面修改完成后摁ctrl+f9）</p>
<p>@Controller</p>
<p>Delete/Put/Get/PostMapping</p>
<p>@Requestaram()</p>
<p>拦截器实现登录检查</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//WebMvcConfigurer中添加拦截器</span></span><br><span class="line"><span class="comment">//WebMvcConfigurer记得要@Bean添加到容器中</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">    registry.addInterceptor(<span class="keyword">new</span> loginHandlerInterceptor()).addPathPatterns(<span class="string">"/**"</span>)        .excludePathPatterns(<span class="string">"/index.html"</span>,<span class="string">"/"</span>,<span class="string">"/user/login"</span>,<span class="string">"/static/**"</span>);</span><br><span class="line">&#125;<span class="comment">//这样在SpringBoot2中也把静态资源拦截了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过addResourceHandlers重写映射文件路径，把静态文件也能够获取（ps 静态文件都要放在"/static/**"内才可</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">registry.addResourceHandler(<span class="string">"/static/**"</span>).addResourceLocations(<span class="string">"classpath:/static/"</span>);</span><br><span class="line">WebMvcConfigurer.<span class="keyword">super</span>.addResourceHandlers(registry);<span class="comment">//记得要吧他爹的内容都继承了，不然就凉啦！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>CRUD-员工列表</p>
<p>1）、RestfulCRUD：CRUD满足Rest风格；</p>
<p>URI： /资源名称/资源标识 HTTP请求方式区分对资源CRUD操作</p>
<table>
<thead>
<tr>
<th>普通CRUD</th>
<th>（uri来区分操作）</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>getEmp</td>
<td>emp—GET</td>
</tr>
<tr>
<td>添加</td>
<td>addEmp?xxx</td>
<td>emp—POST</td>
</tr>
<tr>
<td>修改</td>
<td>updateEmp?id=xxx&amp;xxx=xx</td>
<td>emp/{id}—PUT</td>
</tr>
<tr>
<td>删除</td>
<td>deleteEmp?id=1</td>
<td>emp/{id}—DELETE</td>
</tr>
</tbody></table>
<p>2）、实验的请求架构;</p>
<table>
<thead>
<tr>
<th>实验功能</th>
<th>请求URI</th>
<th>请求方式</th>
</tr>
</thead>
<tbody><tr>
<td>查询所有员工</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>查询某个员工(来到修改页面)</td>
<td>emp/{id}</td>
<td>GET</td>
</tr>
<tr>
<td>来到添加页面</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>添加员工</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>来到修改页面（查出员工进行信息回显）</td>
<td>emp/{id}</td>
<td>GET</td>
</tr>
<tr>
<td>修改员工</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>删除员工</td>
<td>emp/1</td>
<td>DELETE</td>
</tr>
</tbody></table>
<hr>
<h1 id="SpringBoot与数据访问"><a href="#SpringBoot与数据访问" class="headerlink" title="SpringBoot与数据访问"></a>SpringBoot与数据访问</h1><h2 id="1、mybatis"><a href="#1、mybatis" class="headerlink" title="1、mybatis"></a>1、mybatis</h2><hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repositorypublic</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">CourseMapper</span> </span>&#123;    </span><br><span class="line">    <span class="function">List&lt;Course&gt; <span class="title">queryCourseList</span><span class="params">()</span></span>;  </span><br><span class="line">    <span class="function">Course <span class="title">queryCourseById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;   </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addCourse</span><span class="params">(Course course)</span></span>;   <span class="comment">//这里的int返回的是数据库改变的行数，根据这里可以判断是否执行</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateCourse</span><span class="params">(Course course)</span></span>;   </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteCourse</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/Android%E6%9D%80%E6%88%91-%E6%88%91%E7%88%B1Android/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/Android%E6%9D%80%E6%88%91-%E6%88%91%E7%88%B1Android/" class="post-title-link" itemprop="url">Android杀我,我爱Android</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 18:58:38 / 修改时间：19:00:52" itemprop="dateCreated datePublished" datetime="2020-03-18T18:58:38+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>虽然不能这么说，但我还是想说，Android出的比你学的还快（哭），在了解jetpack之前，自己对于安卓的碎片化记录，现在一口气全都塞在一篇md里，留在博客上。欧耶！</p>
</blockquote>
<h1 id="Andriod"><a href="#Andriod" class="headerlink" title="Andriod"></a>Andriod</h1><hr>
<p>常见命令操作</p>
<p><code>abd devices</code>列出所有的设备</p>
<p><code>adb shell</code>挂载到linux的空间</p>
<p><code>adb install xxx.apk</code> 如果有多个设备，我们可以指定设备  adb install –s emulator-5554 D:/xxx.apk</p>
<p><code>emulator –avd advname</code>启动模拟器  例如：emulator –avd 9.0 (9.0 为我们创建设备的名称)</p>
<p><code>adb pull &lt;remote&gt; &lt;local&gt;</code></p>
<p><code>adb push &lt;local&gt; &lt;remote&gt;</code></p>
<p>res/anim/ 存放定义动画的xml的文件</p>
<p>assets资源文件不会在R.java自动生成id</p>
<p><code>AndriodManifest.xml</code> 项目清单文件: 列出应用程序所提供的功能，使用系统内置的应用(如电话服务，互联网服务，短信服务，gps等等)</p>
<p>java code 编译成Dalvik btye code (.dex)</p>
<p>专门为手机设备优化（更好的 内存管理，电源优化等等）</p>
<p>Andriod</p>
<hr>
<p>常见命令操作</p>
<p><code>abd devices</code>列出所有的设备</p>
<p><code>adb shell</code>挂载到linux的空间</p>
<p><code>adb install xxx.apk</code> 如果有多个设备，我们可以指定设备  adb install –s emulator-5554 D:/xxx.apk</p>
<p><code>emulator –avd advname</code>启动模拟器  例如：emulator –avd 9.0 (9.0 为我们创建设备的名称)</p>
<p><code>adb pull &lt;remote&gt; &lt;local&gt;</code></p>
<p><code>adb push &lt;local&gt; &lt;remote&gt;</code></p>
<p>res/anim/ 存放定义动画的xml的文件</p>
<p>assets资源文件不会在R.java自动生成id</p>
<p><code>AndriodManifest.xml</code> 项目清单文件: 列出应用程序所提供的功能，使用系统内置的应用(如电话服务，互联网服务，短信服务，gps等等)</p>
<p>java code 编译成Dalvik btye code (.dex)</p>
<p>专门为手机设备优化（更好的 内存管理，电源优化等等）</p>
<hr>
<p>点击：</p>
<p>1、OnClickListener()</p>
<p>2、布局文件中直接写onclick  activity中的方法传值一定要写个View</p>
<hr>
<h3 id="五大布局："><a href="#五大布局：" class="headerlink" title="五大布局："></a>五大布局：</h3><p>线性布局</p>
<p>相对布局</p>
<p>表格布局</p>
<p>约束布局</p>
<p>帧布局</p>
<p><code>shift+F6</code> 快捷键</p>
<hr>
<p>显示单位：</p>
<p> px (pixels)像素<br>     一般HVGA代表320x480像素。</p>
<p> dip或dp (device independent pixels)设备独立像素<br>    这个和设备硬件有关，一般为了支持WVGA、HVGA和QVGA 推荐使用这个，不依赖像素。</p>
<p>sp (scaled pixels — best for text size)比例像素<br>    主要处理字体的大小，可以根据系统的字体自适应。</p>
<p>除了上面三个显示单位，下面还有几个不太常用：<br> in (inches)英寸<br> mm (millimeters)毫米<br> pt (points)点，1/72英寸</p>
<p>为了适应不同分辨率，不同的像素密度，推荐使用dip ，文字使用sp。</p>
<hr>
<p> iew的各种属性的简单介绍</p>
<p>ID 标志，身份 IDCARD<br>layout_width 控件的宽度<br>    wrap_content 包裹内容 多大是由内部显示的大小决定<br>    match_parent 填充父元素 它的父容器多大就是多大<br>layout_height 控件的高度<br>    wrap_content 包裹内容 多大是由内部显示的大小决定<br>    match_parent 填充父元素 它的父容器多大就是多大</p>
<hr>
<p>颜色Color</p>
<p>8bit 3 * 8 = 24 色</p>
<p>RGBR=REDG=GREENB=BLUE</p>
<p>#00FF00 green<br>#0000FF blue</p>
<p>1 byte = 8 bit4 bit max 16 = fff = 11111111    </p>
<p>#00ff00<br>00000000 11111111 00000000</p>
<hr>
<h2 id="Junit单元测试"><a href="#Junit单元测试" class="headerlink" title="Junit单元测试"></a>Junit单元测试</h2><p>assertEquals(expected,actual)//断言判断是否相等</p>
<hr>
<h2 id="数据存储与访问"><a href="#数据存储与访问" class="headerlink" title="数据存储与访问"></a>数据存储与访问</h2><ul>
<li>文件</li>
<li>SharePreferences</li>
</ul>
<p>activity中openfileoutput方法</p>
<p>Context.MODE_PRIVATE</p>
<p>Context.MODE_APPEND</p>
<hr>
<h1 id="ez-RecyclerView-amp-Adpter"><a href="#ez-RecyclerView-amp-Adpter" class="headerlink" title="ez RecyclerView &amp; Adpter"></a>ez RecyclerView &amp; Adpter</h1><blockquote>
<p>At the first, to build the apter and  use it!</p>
</blockquote>
<ul>
<li><p>创建适配器</p>
</li>
<li><p>onCreateViewHolder:用于得到我们自定义的ViewHolder,在listView中,我们也会定义ViewHolder来承载视图中的元素.<br>onBindViewHolder:是用于将指定位置的数据和视图绑定起来的<br>getItemCount:用于获取列表总共的item数</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 首先，我们新建一个NormalHolder，来保存布局中的控件所对应的变量。</span></span><br><span class="line"><span class="comment">     * 然后在onCreateViewHolder中返回新建的NormalHolder对象，</span></span><br><span class="line"><span class="comment">     * 最后通过onBindViewHolder将NormalHolder与数据绑定起来。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoverFlowAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerView</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;String&gt; mDatas;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mCreatedHolder = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] mPics = &#123;R.mipmap.item1, R.mipmap.item2, R.mipmap.item3&#125;;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">  	<span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(@NonNull ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        mCreatedHolder++;</span><br><span class="line">        LayoutInflater inflater = LayoutInflater.from(mContext);<span class="comment">//被称为布局文件实例化器。</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * LayoutInflater.from() 本质就是获取Context，mContext从外部构造时创建出context，</span></span><br><span class="line"><span class="comment">        以下是内部源码</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">          LayoutInflater LayoutInflater =</span></span><br><span class="line"><span class="comment">                (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);</span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">         * LAYOUT_INFLATER_SERVICE:</span></span><br><span class="line"><span class="comment">         * Use with &#123;<span class="doctag">@link</span> #getSystemService(String)&#125; to retrieve a</span></span><br><span class="line"><span class="comment">         * &#123;<span class="doctag">@link</span> android.view.LayoutInflater&#125; for inflating layout resources in this</span></span><br><span class="line"><span class="comment">         * context.</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         public static final String LAYOUT_INFLATER_SERVICE = "layout_inflater";       </span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        **/</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NormalHolder(inflater.inflate(R.layout.item_coverflow, parent, <span class="keyword">false</span>));</span><br><span class="line">        <span class="comment">//在最后return的时候返回一个实例化的Holder</span></span><br><span class="line">        <span class="comment">/**参数解释，</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> resource ID for an XML layout resource to load (e.g.,</span></span><br><span class="line"><span class="comment">         *        &lt;code&gt;R.layout.main_page&lt;/code&gt;)</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> root Optional view to be the parent of the generated hierarchy (if</span></span><br><span class="line"><span class="comment">         *        &lt;em&gt;attachToRoot&lt;/em&gt; is true), or else simply an object that</span></span><br><span class="line"><span class="comment">         *        provides a set of LayoutParams values for root of the returned</span></span><br><span class="line"><span class="comment">         *        hierarchy (if &lt;em&gt;attachToRoot&lt;/em&gt; is false.)</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> attachToRoot Whether the inflated hierarchy should be attached to</span></span><br><span class="line"><span class="comment">         *        the root parameter? If false, root is only used to create the</span></span><br><span class="line"><span class="comment">         *        correct subclass of LayoutParams for the root view in the XML.</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> The root View of the inflated hierarchy. If root was supplied and</span></span><br><span class="line"><span class="comment">         *         attachToRoot is true, this is root; otherwise it is the root of</span></span><br><span class="line"><span class="comment">         *         the inflated XML file.</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(@NonNull RecyclerView.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        NormalHolder normalHolder = (NormalHolder) holder;</span><br><span class="line">        normalHolder.mTV.setText(mDatas.get(position));</span><br><span class="line">        normalHolder.mImg.setImageDrawable(ContextCompat.getDrawable(mContext, mPics[position % mPics.length]));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mDatas.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CoverFlowAdapter</span><span class="params">(Context context, ArrayList&lt;String&gt; datas)</span> </span>&#123;<span class="comment">//有参构造方法</span></span><br><span class="line">        mContext = context;</span><br><span class="line">        mDatas = datas;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> TextView mTV;</span><br><span class="line">        <span class="keyword">public</span> ImageView mImg;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">NormalHolder</span><span class="params">(@NonNull View itemView)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(itemView);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * mTV</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            mTV = (TextView) itemView.findViewById(R.id.text);</span><br><span class="line">            mTV.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                    Toast.makeText(mContext, mTV.getText(), Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * mImg</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            mImg = (ImageView) itemView.findViewById(R.id.img);</span><br><span class="line">            mImg.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                    Toast.makeText(mContext, mTV.getText(), Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用适配器</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoverFlowActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ArrayList&lt;String&gt; datas = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * recycleView全过程</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        datas.add(<span class="string">"test"</span>);</span><br><span class="line">        datas.add(<span class="string">"test2"</span>);</span><br><span class="line">        datas.add(<span class="string">"test3"</span>);</span><br><span class="line">        <span class="comment">//获取xml布局文件，此处布局文件是根布局文件，不包含recycleView的内部内容。</span></span><br><span class="line">        setContentView(R.layout.item_list);</span><br><span class="line">        <span class="comment">//找到xml根布局文件中的recycleView框</span></span><br><span class="line">        RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycle_view);</span><br><span class="line">        <span class="comment">//生成所需要的相对应的适配器</span></span><br><span class="line">        CoverFlowAdapter coverFlowAdapter = <span class="keyword">new</span> CoverFlowAdapter(CoverFlowActivity.<span class="keyword">this</span>, datas);</span><br><span class="line">        <span class="comment">//给recycleView套用适配器</span></span><br><span class="line">        recyclerView.setAdapter(coverFlowAdapter);</span><br><span class="line">        <span class="comment">//给recycleView设置LayoutManager</span></span><br><span class="line">        recyclerView.setLayoutManager(<span class="keyword">new</span> LinearLayoutManager(CoverFlowActivity.<span class="keyword">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RecyclerView的回收复用原理"><a href="#RecyclerView的回收复用原理" class="headerlink" title="RecyclerView的回收复用原理"></a>RecyclerView的回收复用原理</h3><p>————————————————<br>版权声明：本文为CSDN博主「启舰」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/harvic880925/article/details/84866486" target="_blank" rel="noopener">https://blog.csdn.net/harvic880925/article/details/84866486</a></p>
<h4 id="回收原则"><a href="#回收原则" class="headerlink" title="回收原则"></a>回收原则</h4><p>我们在自定义的LayoutManager中只需要告诉RecyclerView哪些HolderView已经不用了即可（使用removeAndRecycleView(view, recycler)函数）。</p>
<p>然后RecyclerView中用两级缓存（mCachedViews和mRecyclerPool）来保存这些已经被废弃(Removed)的HolderView。</p>
<p>这两个缓存的区别是：mCachedViews是第一级缓存，它的size为2，只能保存两个HolderView。这里保存的始终是最新鲜被移除的HolderView，当mCachedViews满了以后，会利用先进先出原则，把老的HolderView存放在mRecyclerPool中。在mRecyclerPool中，它的默认size是5。这就是RecyclerView的回收原则。</p>
<table>
<thead>
<tr>
<th>#</th>
<th>mCachedViews</th>
<th>mRecyclerPool</th>
<th>mAttachedScrap</th>
<th>mViewCacheExtension</th>
</tr>
</thead>
<tbody><tr>
<td>大小</td>
<td>2</td>
<td>5</td>
<td></td>
<td>自定义扩展不讨论</td>
</tr>
<tr>
<td>优先级s</td>
<td>0</td>
<td>2</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>说明</td>
<td>保存最新的废弃</td>
<td>从mcache中获取，先进先出</td>
<td>不参与回收复用</td>
<td>自定义扩展不讨论</td>
</tr>
</tbody></table>
<p>上面简单讲解了几个池子的作用以后，我们再重新看下在RecyclerView需要一个HolderView的过程：<br>要从RecyclerView中拿到一个HolderView用来布局，我们一般是使用<code>recycler.getViewForPosition(int position)</code>,它的意思就是给指定位置获取一个HolderView实例。<code>recycler.getViewForPosition(int position)</code>获取过程就比较有意思，它会先在mAttachedScrap中找，看要的View是不是刚刚剥离的，如果是就直接返回使用，如果不是，先在mCachedViews中查找，因为在mCachedViews中精确匹配，如果匹配到，就说明这个HolderView是刚刚被移除的，也直接返回，如果匹配不到就会最终到mRecyclerPool找，如果mRecyclerPool有现成的holderView实例，这时候就不再是精确匹配了，只要有现成的holderView实例就返回给我们使用，只有在mRecyclerPool为空时，才会调用<code>onCreateViewHolder</code>新建。</p>
<p>这里需要注意的是，在mAttachedScrap和mCachedViews中拿到的HolderView，因为都是精确匹配的，所以都是直接使用，不会调用onBindViewHolder重新绑定数据，只有在mRecyclerPool中拿到的HolderView才会重新绑定数据。正是有mCachedViews的存在，所以只有在RecyclerView来回滚动时，池子的使用效率最高，因为凡是从mCachedViews中取的HolderView是直接使用的，不需要重新绑定数据。</p>
<p>RecyclerView的回收复用简要过程就是上面的内容了，过程初理解起来还是比较费劲的，大家需要多读几遍。下面我们将通过代码来讲解自定义CustomLayout的回收复用过程。</p>
<hr>
<p>SnapHelper!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PagerSnapHelper helper = <span class="keyword">new</span> PagerSnapHelper();helper.attachToRecyclerView(recyclerView);</span><br></pre></td></tr></table></figure>
<p>RecyclerView的嵌套！<br>RecyclerView的warp_content属性无效！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/sql%E7%9A%84%E9%80%BC%E9%80%BC%E5%8F%A8%E5%8F%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/sql%E7%9A%84%E9%80%BC%E9%80%BC%E5%8F%A8%E5%8F%A8/" class="post-title-link" itemprop="url">sql的逼逼叨叨（小声）</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 18:56:04 / 修改时间：18:57:41" itemprop="dateCreated datePublished" datetime="2020-03-18T18:56:04+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>不成体系的随意写，一些小小记录和想法</p>
</blockquote>
<hr>
<p>红黑树：高度不可控 数据量大的时候就会炸啦</p>
<p>b-Tree：叶节点具有相同的深度</p>
<p>b+树 ：非叶子节点不存储data，只存储索引（冗余）</p>
<p>叶子节点能够存储更多的索引元素</p>
<p>建表 不同表可以选择不同的存储引擎</p>
<p>默认安装目录下的data目录下面</p>
<p>myd文件存储记录</p>
<p>InnoDB索引实现：（聚集）b+树</p>
<p>为什么InnoDB表必须有主键，并且推荐使用整型的自增主键</p>
<p>为什么非主键索引结构叶子节点存储的是主键值</p>
<p>hash索引 范围查找搞不定</p>
<p>联合索引的底层存储结构长什么样？</p>
<p>全值匹配我最爱，最左前缀要遵守；</p>
<p>带头大哥不能死，中间兄弟不能断；</p>
<p>索引列上少计算，范围之后全失效；</p>
<p>Like百分写最右，覆盖索引不写星；</p>
<p>不等空值还有or，索引失效要少用</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/Doooooooocker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/Doooooooocker/" class="post-title-link" itemprop="url">Doooooooocker!</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 18:51:59 / 修改时间：18:54:52" itemprop="dateCreated datePublished" datetime="2020-03-18T18:51:59+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>俺浅薄的docker+Linux学习，从醉醉最基本的Linux虚拟机安装使用到dockerfile的书写，“保姆”级学习流程，当然里面可能“屁话”过多，hhh。请多多指教！</p>
</blockquote>
<h1 id="Linux-Docker-Examples"><a href="#Linux-Docker-Examples" class="headerlink" title="Linux-Docker Examples"></a>Linux-Docker Examples</h1><h3 id="2019-11-16-1-Virtual-Machine"><a href="#2019-11-16-1-Virtual-Machine" class="headerlink" title="2019.11.16 - 1.Virtual Machine"></a>2019.11.16 - 1.Virtual Machine</h3><p>下载最新版VirtualBox<br>创建一个1GB内存+动态15GB磁盘，名为CentOS的虚拟机。注意，放在合适的位置<br><a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">https://opsx.alibaba.com/mirror</a><br>下载CentOS7.7.1908，DVD iso版，4.66GB(4.34GB)<br>在虚拟机的光驱，引入下载的CentOS镜像<br>鉴于需登录的校园网络特点，网络模式使用默认的NAT模式<br>桥接，默认的网络地址转换(NAT)的区别？<br>从虚拟机切出鼠标/键盘的控制的快捷键？</p>
<h3 id="2019-11-16-2-CentOS"><a href="#2019-11-16-2-CentOS" class="headerlink" title="2019.11.16 - 2.CentOS"></a>2019.11.16 - 2.CentOS</h3><p>运行虚拟机，进入centos安装模式<br>打开网络功能，默认的自动分配IP<br>安装位置，无需分区<br>安装minimal版，后续软件包可以再添加<br>安装过程中，设置root账号密码，创建一个普通操作权限的用户/密码<br>安装时，查找资料了解root/普通用户，Linux系统操作权限管理<br>安装完毕，光驱卸载iso，重启</p>
<p>初学者可以直接以root账号登录<br>查看网络是否正常，ping通百度<br>停止操作快捷键？自动补全快捷键？</p>
<h3 id="2019-11-16-3-SSH"><a href="#2019-11-16-3-SSH" class="headerlink" title="2019.11.16 - 3.SSH"></a>2019.11.16 - 3.SSH</h3><p>win10可安装win10自带的OpenSSH客户端。什么是SSH？<br>Win7安装Bitvise SSH Client或其他SSH客户端<br>在VB网络设置中，创建一个宿主机到虚拟机的ssh端口映射<br>通过控制台，以root登入虚拟机，注意需显式声明端口参数<br>为什么通过ssh连接服务器，而不直接在虚拟机中操作？</p>
<p>如果能够正确进入服务器，则可以在VB中为虚拟机创建一个系统快照作为基础镜像，<br>后续操作出问题，可以回滚到当前版本。当然，直接删了虚拟机重来也很方便</p>
<h3 id="2019-11-16-4-Don’t-Be-Scared-of-the-Terminal"><a href="#2019-11-16-4-Don’t-Be-Scared-of-the-Terminal" class="headerlink" title="2019.11.16 - 4.Don’t Be Scared of the Terminal"></a>2019.11.16 - 4.Don’t Be Scared of the Terminal</h3><p>基本命令<br>清屏，快速删除命令，列出，进入/退出目录，根目录，home目录，<br>创建/删除/重命名目录，查看系统版本，系统内核，cpu/内存占用，磁盘占用。要使用自动补全<br>在/home/用户下，练习创建/删除/重命名目录</p>
<h3 id="2019-11-23-5-vi"><a href="#2019-11-23-5-vi" class="headerlink" title="2019.11.23 - 5.vi"></a>2019.11.23 - 5.vi</h3><p>vi，Linux经典编辑器<br>在/home/用户下，基于vi创建文件test，编写C语言主函数打印输出hello world</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ vi test</span><br><span class="line"></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    printf(&quot;Hello world of docker!\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#96;esc&#96; + &#96;:w&#96; +&#96;:q&#96;</span><br></pre></td></tr></table></figure>
<p><code>ctrl+z+z</code> 不保存退出<br><code>shift+z+z</code> 保存退出<br>掌握最基本的操作指令，编辑模式/删除整行/保存退出/不保存退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">先按Esc键,再按以下</span><br><span class="line">:wq或:x                      保存并退出(会保存修改的文件内容)</span><br><span class="line">:q                           退出，适用于未修改的文件</span><br><span class="line">:q!                          强制退出，适用于修改文件后不保存退出(加感叹号表示强制,不会保存修改的文件内容)</span><br></pre></td></tr></table></figure>
<p>在/home/用户下，创建名为code的目录，将文件重命名为hello.c；移动到code目录。即，学习掌握基本的重命名/移动命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir code &#x2F;&#x2F;创建名为code目录</span><br><span class="line">$ cd .. &#x2F;&#x2F;退回home目录</span><br><span class="line">$ mv test hello.c &#x2F;&#x2F;将文件重命名为hello.c</span><br></pre></td></tr></table></figure>
<p>Linux mv 命令用来为文件或目录改名、或将文件或目录移入其它位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv [options] source dest</span><br><span class="line">mv [options] source... directory</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>命令格式</th>
<th>运行结果</th>
</tr>
</thead>
<tbody><tr>
<td>mv 文件名 文件名</td>
<td>将源文件名改为目标文件名</td>
</tr>
<tr>
<td>mv 文件名 目录名</td>
<td>将文件移动到目标目录</td>
</tr>
<tr>
<td>mv 目录名 目录名</td>
<td>目标目录已存在，将源目录移动到目标目录；目标目录不存在则改名</td>
</tr>
<tr>
<td>mv 目录名 文件名</td>
<td>出错</td>
</tr>
<tr>
<td>### 2019.11.23 - 6.yum</td>
<td></td>
</tr>
<tr>
<td>了解linux的软件管理方式</td>
<td></td>
</tr>
<tr>
<td>yum？repo？rpm？为什么使用yum？基于yum下载的是程序源码还是编译完的二进制文件？</td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<ol start="0">
<li>Yum(全称为 Yellow dogUpdater, Modified)是一个在Fedora和RedHat以及CentOS中的Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。</li>
<li>RPM 全称为：Red-Hat Package Manager，即红帽 Linux 发行版的软件包管理器。</li>
<li>linux下，repo文件都是存放在/etc/yum.repos.d文件夹之中的。repo文件即是我们常说的源文件(repositry匹配文件)，在使用yum命令的时候系统会自动读取repo文件，然后去repositry获取软件。</li>
<li>比起使用rpm命令安装软件，yum方式安装会自动下载依赖文件，更加的方便</li>
<li>基于yum下载的是编译完的二进制文件</li>
</ol>
</blockquote>
<p>为什么有时需要下载源码在本地编译，而不是直接下载编译好的二进制文件？</p>
<blockquote>
<p>从源代码制作软件的过程，称之为是软件编译。从源代码构建成软件的编译有两种方式：</p>
<ul>
<li>本机编译 （Natively Compiled），对应编译型语言。(C 语言是本机编译)</li>
<li>解释编译（Interpreted Compiled），对应解释性语言。(如 Python，就需要一个编译步骤，把源代码构建成 Python 的语言解释器（称为 CPython）的可以执行文件)<br>实际上，我们在构建二进制 RPM 包时，有两种构建方法：</li>
<li>从源码构建 SRPM，然后再构建二进制 RPM</li>
<li>直接从源码构建二进制 RPM。<br>然而，在软件开发中，我们通常会采用第一种方法，因为它有<strong>以下优势</strong>：</li>
</ul>
<ol>
<li>便于保留的 RPM 版本的确切来源（以 Name-Version-Release 格式标注）。这对于 debug 非常有用。</li>
<li>需要在不同的处理器硬件平台上使用 SRPM 构建二进制 RPM。</li>
</ol>
</blockquote>
<p>学习yum基本命令：列出所有已安装，基于通配符查询已安装，所有可更新，更新全部可更新，基于通配符列出远程仓库匹配的软件包，安装所需软件包<br>无需添加国内仓库镜像网址，centos自动在延迟最小的仓库下载(我这是上海交大/163镜像)。还是要理解yum repo</p>
<ul>
<li>列出所有已安装的软件包 ：<code>yum list installed</code></li>
<li>基于通配符查询已安装<code>yum list installed ^bash     #这个根据自己会的正则表达式进行筛选</code><br><code>yum list|grep gcc</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">“| ”管道符用法</span><br><span class="line"></span><br><span class="line">上一条命令的输出，作为下一条命令参数</span><br><span class="line"></span><br><span class="line">方式：command1 | command2</span><br></pre></td></tr></table></figure></li>
<li>列出资源库中与正则表达式匹配的所有可以更新的rpm包<code>yum list updates #正则表达式匹配</code></li>
<li>查看信息<code>yum info installed gcc</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 安装</span><br><span class="line">yum install 全部安装</span><br><span class="line">yum install package1 安装指定的安装包package1</span><br><span class="line">yum groupinsall group1 安装程序组group1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2 更新和升级</span><br><span class="line">yum update 全部更新</span><br><span class="line">yum update package1 更新指定程序包package1</span><br><span class="line">yum check-update 检查可更新的程序</span><br><span class="line">yum upgrade package1 升级指定程序包package1</span><br><span class="line">yum groupupdate group1 升级程序组group1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3 查找和显示</span><br><span class="line">yum info package1 显示安装包信息package1</span><br><span class="line">yum list 显示所有已经安装和可以安装的程序包</span><br><span class="line">yum list package1 显示指定程序包安装情况package1</span><br><span class="line">yum groupinfo group1 显示程序组group1信息yum search string 根据关键字string查找安装包</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">4 删除程序</span><br><span class="line">yum remove &amp;#124; erase package1 删除程序包package1</span><br><span class="line">yum groupremove group1 删除程序组group1</span><br><span class="line">yum deplist package1 查看程序package1依赖情况</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5 清除缓存</span><br><span class="line">yum clean packages 清除缓存目录下的软件包</span><br><span class="line">yum clean headers 清除缓存目录下的 headers</span><br><span class="line">yum clean oldheaders 清除缓存目录下旧的 headers</span><br><span class="line">yum clean, yum clean all (&#x3D; yum clean packages; yum clean oldheaders) 清除缓存目录下的软件包及旧的header</span><br></pre></td></tr></table></figure>
<p>基于yum安装gcc，查看是否已安装<br><code>yum install gcc</code><br><code>yum info installed gcc</code></p>
<p>基于gcc将code目录下的hello.c，编译生成可运行的名为hello的文件，运行查看输出结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -o hello hello.c</span><br><span class="line">$ .&#x2F;hello</span><br></pre></td></tr></table></figure>
<p>也可安装openjdk11，编写Java版hello world。java11起可直接通过java命令运行，自动先编译<br>gcc安装到哪了？列出安装gcc的位置，各位置的作用，为什么可以在任意位置直接运行gcc命令？<br><code># rpm -ql gcc</code><br><code>whereis gcc</code><br><code>-query 中的 -l  list all license files</code></p>
<blockquote>
<p>简单说PATH就是一组路径的字符串变量，当你输入的命令不带任何路径时，LINUX会在PATH记录的路径中查找该命令。有的话则执行，不存在则提示命令找不到，也就是我们经常看到的-bash:<code>* * * : command not found</code>。比如在根目录/下可以输入命令<code>ls</code>,在/usr目录下也可以输入<code>ls</code>,但其实<code>ls</code>命令根本不在这个两个目录下，当你输入ls命令时LINUX会去/bin,/usr/bin,/sbin等目录寻找该命令。而PATH就是定义/bin:/sbin:/usr/bin等这些路劲的变量，其中冒号为目录间的分割符。使用export $PATH命令可以查看环境变量的内容。</p>
</blockquote>
<p>基于yum history卸载(回滚)gcc及全部依赖<br>yum remove卸载时却只卸载这个文件包本身,如果需要删除安装时附加的依赖包可以使用yum history的相关操作实现回滚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost bin]# yum history list gcc</span><br><span class="line">已加载插件：fastestmirror</span><br><span class="line">ID     | 命令行                   | 日期和时间       | 操作           | 变更数</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">     2 | install gcc              | 2019-11-24 14:20 | I, U           |   11 EE</span><br><span class="line">[root@localhost bin]# yum histroy undo 2</span><br></pre></td></tr></table></figure>
<p>直接删除非空的test目录。命令参数？<br><code>rm -rf code/</code></p>
<h3 id="2019-11-23-7-Directory-Structure"><a href="#2019-11-23-7-Directory-Structure" class="headerlink" title="2019.11.23 - 7.Directory Structure"></a>2019.11.23 - 7.Directory Structure</h3><p>了解根目录下的，主要目录的功能<br>bin/; dev/; mnt/; etc/; opt/; usr/; lib/; home/; /usr/bin/; /usr/lib/; /usr/libexec/;<br><img src="https://www.runoob.com/wp-content/uploads/2014/06/003vPl7Rty6E8kZRlAEdc690.jpg" alt="linux目录结构"><br><code>bin/</code>:bin是Binary的缩写, 这个目录存放着最经常使用的命令.<br><code>dev/</code>:dev是Device(设备)的缩写, 该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。<br><code>mnt/</code>:系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。<br><code>etc/</code>:这个目录用来存放所有的系统管理所需要的配置文件和子目录。<br><code>opt/</code>: 这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。<br><code>usr/</code>: 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。<br><code>lib/</code>:这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。<br><code>/usr/bin</code>：系统用户使用的应用程序。<br><code>/usr/lib</code>:存放一些函数库、执行文件及连接文件，特别的是，存放在这里面的文件都是不希望直接被用户或shell脚本所使用的文件，在/usr/lib中有非常多的子目录，每一个软件都有其各自所需的函数库；<br><code>/usr/libexec</code>: 目录下存放一些函数库、执行文件及连接文件</p>
<blockquote>
<p>在 Linux 系统中，有几个目录是比较重要的，平时需要注意不要误删除或者随意更改内部文件。<br>/etc： 上边也提到了，这个是系统中的配置文件，如果你更改了该目录下的某个文件可能会导致系统不能启动。<br>/bin, /sbin, /usr/bin, /usr/sbin: 这是系统预设的执行文件的放置目录，比如 ls 就是在/bin/ls 目录下的。<br>值得提出的是，/bin, /usr/bin 是给系统用户使用的指令（除root外的通用户），而/sbin, /usr/sbin 则是给root使用的指令。<br>/var： 这是一个非常重要的目录，系统上跑了很多程序，那么每个程序都会有相应的日志产生，而这些日志就被记录到这个目录下，具体在/var/log 目录下，另外mail的预设放置也是在这里。</p>
</blockquote>
<h3 id="2019-11-30-8-Mount"><a href="#2019-11-30-8-Mount" class="headerlink" title="2019.11.30 - 8.Mount"></a>2019.11.30 - 8.Mount</h3><p><strong>插入一个fat32/ntfs格式U盘，exfat默认不支持<br>设置虚拟机识别读取。基本命令：列出所有指定格式磁盘；挂载设备，浏览设备内文件；取消挂载</strong></p>
<blockquote>
<p>CentOS默认源里没有NTFS-3G，想要添加ntfs支持，无非是自己下载编译安装或者加源yum安装。重新安装了一个CentOS7，用的是添加aliyun的epel源来yum安装的方式，简单易行。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、加源</span><br><span class="line">wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;epel.repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;repo&#x2F;epel-7.repo</span><br><span class="line">2、安装</span><br><span class="line"># yum update;yum install ntfs-3g</span><br><span class="line">如果系统提示：没有可用软件包，可以输入</span><br><span class="line"># yum install ntfs*</span><br></pre></td></tr></table></figure>
<p><code>fdisk -l</code>or<code>lsblk</code>(后者可以树状结构显示)</p>
<p><code>mount.ntfs-3g  /dev/sdb4 /mnt/</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># umount -v &#x2F;dev&#x2F;sda1          通过设备名卸载  </span><br><span class="line">&#x2F;dev&#x2F;sda1 umounted  </span><br><span class="line"># umount -v &#x2F;mnt&#x2F;mymount&#x2F;      通过挂载点卸载  </span><br><span class="line">&#x2F;tmp&#x2F;diskboot.img umounted</span><br></pre></td></tr></table></figure>

<h3 id="2019-11-26-9-bash-amp-chmod"><a href="#2019-11-26-9-bash-amp-chmod" class="headerlink" title="2019.11.26 - 9.bash &amp; chmod"></a>2019.11.26 - 9.bash &amp; chmod</h3><p><strong>Shell？bash？cat？了解脚本的：基本结构，支持的语句，执行linux命令，运行即可</strong><br>####1.What is shell？</p>
<blockquote>
<p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。<br>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。</p>
<blockquote>
<p>bash是Unix shell的一种，Bash是许多Linux发行版的默认Shell<br>cat 命令用于连接文件并打印到标准输出设备上。（cat是使用方法不仅局限于查看内容，他也可以做到修改内容但是个人平常并不推荐这么用）</p>
</blockquote>
</blockquote>
<p>####2.基本结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">echo &quot;Hello World !&quot;</span><br></pre></td></tr></table></figure>
<p><kbd>#!</kbd> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。<br>echo 命令用于向窗口输出文本。<br>####3.支持语句<br><kbd>echo</kbd><br><kbd>printf</kbd><br><kbd>test</kbd><br><kbd>for循环语句<kbd>：</kbd></kbd></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for 变量名 in 列表;do</span><br><span class="line">               循环体</span><br><span class="line">       done</span><br></pre></td></tr></table></figure>
<p><strong>shell参数传递：</strong><br><kbd>$#</kbd> :传递到脚本的参数个数<br><kbd>$*</kbd> :以一个单字符串显示所有向脚本传递的参数。如<kbd>"$*"</kbd>用\「&quot;\」括起来的情况、以”$1 $2 … $n”的形式输出所有参数。<br><kbd>$$</kbd>    :脚本运行的当前进程ID号<br><kbd>$!</kbd>    :后台运行的最后一个进程的ID号<br><kbd>$@</kbd>    :与<kbd>$*</kbd>相同，但是使用时加引号，并在引号中返回每个参数。如<kbd>&quot;$@&quot;</kbd>用「”」括起来的情况、以”$1” “$2” … “$n” 的形式输出所有参数。<br><kbd>$-</kbd>    :显示Shell使用的当前选项，与set命令功能相同。<br><kbd>$?</kbd>    :显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</p>
<p><strong>在/home/用户名/test下，基于vi编写一个由bash执行的，打印出/home/用户名/test/下所有文件的脚本<br>需要添加脚本文件的执行权限，运行<br>基于cat读取显式脚本代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">for file in &#96;ls&#96;;do</span><br><span class="line">        echo $file;</span><br><span class="line">done;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">ls &#x2F;home&#x2F;C_program</span><br></pre></td></tr></table></figure>

<p>使用 <kbd>Ctrl</kbd>+<kbd>Z</kbd>+<kbd>Z</kbd>可以直接保存退出</p>
<p><strong>带权限的列出文件</strong><br><code>ls -al</code> <code>ls -l</code>=<code>ll</code><br><strong>chmod命令，r/w/x？3组权限？u/g/o？增加/修改/删除指定角色的指定权限。使用语义参数比数字好记<br>为以上脚本文件，添加创建者具有读写执行权限命令？取消其他用户的读权限？<br>权限角色，u，所有者；g，组；o，其他人</strong></p>
<ul>
<li>u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。  </li>
<li>+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。  </li>
<li>r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。  </li>
</ul>
<p>r=4,w=2,x=1</p>
<ul>
<li>-c : 若该文件权限确实已经更改，才显示其更改动作</li>
<li>-f : 若该文件权限无法被更改也不要显示错误讯息</li>
<li>-v : 显示权限变更的详细资料</li>
<li>-R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod ugo+r file1.txt 所有人皆可读取</span><br><span class="line">chmod a+r file1.txt 所有人皆可读取</span><br><span class="line">chmod ug+w,o-w file1.txt file2.txt 将文件 file1.txt 与 file2.txt 设为该文件拥有者，与其所属同一个群体者可写入，但其他以外的人则不可写入</span><br><span class="line">chmod -R a+r * 将目前目录下的所有文件与子目录皆设为任何人可读取</span><br></pre></td></tr></table></figure>
<h3 id="2019-11-26-10-Docker"><a href="#2019-11-26-10-Docker" class="headerlink" title="2019.11.26 - 10.Docker"></a>2019.11.26 - 10.Docker</h3>可以把安装的gcc/openjdk等等都卸载了<br><a href="https://docs.docker.com/engine/docker-overview/" target="_blank" rel="noopener">https://docs.docker.com/engine/docker-overview/</a><br><a href="https://geekflare.com/docker-vs-virtual-machine/" target="_blank" rel="noopener">https://geekflare.com/docker-vs-virtual-machine/</a><br><a href="https://yeasy.gitbooks.io/docker_practice/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/</a><h4 id="1-虚拟化技术-amp-docker虚拟化优势"><a href="#1-虚拟化技术-amp-docker虚拟化优势" class="headerlink" title="1.虚拟化技术&amp;docker虚拟化优势"></a>1.虚拟化技术&amp;docker虚拟化优势</h4></li>
</ul>
<p><strong>了解早先服务器基于虚拟化技术的部署，为什么使用虚拟化技术？当前Docker的虚拟化与之前的区别？优点？了解docker images docker containers？</strong></p>
<p>最大利用化:<br>虚拟化技术可以扩大硬件的容量，简化软件的重新配置过程。CPU的虚拟化技术可以单CPU模拟多CPU并行，允许一个平台同时运行多个操作系统，并且应用程序都可以在相互独立的空间内运行而互不影响，从而显著提高计算机的工作效率。<br>docker 和 之前的区别：</p>
<table>
<thead>
<tr>
<th>Virtual Machine</th>
<th>Docker Container</th>
</tr>
</thead>
<tbody><tr>
<td>Hardware-level process isolation</td>
<td>OS level process isolation</td>
</tr>
<tr>
<td>Each VM has a separate OS</td>
<td>Each container can share OS</td>
</tr>
<tr>
<td>Boots in minutes</td>
<td>Boots in seconds</td>
</tr>
<tr>
<td>VMs are of few GBs</td>
<td>Containers are lightweight (KBs/MBs)</td>
</tr>
<tr>
<td>Ready-made VMs are difficult to find</td>
<td>Pre-built docker containers are easily available</td>
</tr>
<tr>
<td>VMs can move to new host easily</td>
<td>Containers are destroyed and re-created rather than moving</td>
</tr>
<tr>
<td>Creating VM takes a relatively longer time</td>
<td>Containers can be created in seconds</td>
</tr>
<tr>
<td>More resource usage</td>
<td>Less resource usage</td>
</tr>
</tbody></table>
<img src="https://docs.docker.com/images/Container%402x.png" width="300" alt="图片名称">
<img src="https://docs.docker.com/images/VM%402x.png" width="300" alt="图片名称">

<p>Docker engine提供了启动Images和containers核心的技术的支持。当你运行docker run hello-world 命令时，实际上可分为三个部分：<br><img src="https://images2015.cnblogs.com/blog/918915/201701/918915-20170126134304191-517283657.png" alt="运行docker run hello-world的时间过程"></p>
<ol>
<li>告诉你操作系统你正在使用的docker程序</li>
<li>一个子命令创建并且运行docker容器</li>
<li>告诉docker将载入到容器中的Image映像  </li>
</ol>
<p>一个映像是一个文件系统，是在运行时使用的参数，它没有状态和不会改变。容器用来运行映像的实例。当你运行下面命令的时候将会发生下面这些情况：</p>
<ol>
<li>检查你是否有hello-world软件映像</li>
<li>从Docker Hub中下载映像</li>
<li>将映像载入容器中并运行它。</li>
</ol>
<p>依赖于这个映像如何创建，一个映像可能运行一个简单、单一的命令然后退出，hello-world映像就是这样的，不过docker还能启动向数据库那样的软件。Docker引擎能够是人们或者公司创建和分享自己的Docker 映像。使用Docker引擎，你不需要担心你的计算机能否运行Docker映像中的软件，Docker容器总是可以运行它。</p>
<h4 id="2-What-is-vps-and-Cloud-Servers"><a href="#2-What-is-vps-and-Cloud-Servers" class="headerlink" title="2.What is vps and Cloud Servers?"></a>2.What is vps and Cloud Servers?</h4><p><strong>Servers？VPS？Cloud Servers？为什么VPS创建了就开始计时付费？而云可以按流量/CPU内存等的实际使用量弹性付费？</strong></p>
<ul>
<li>vps： 是采用操作系统虚拟化技术，将一台服务器分割为多个虚拟专享服务器<br> 用户和服务器存在一种绑定的关系</li>
<li>云服务器：在服务器集群中采用硬件虚拟化技术。<br> 随时虚拟化的过程</li>
</ul>
<p><a href="https://docs.docker.com/" target="_blank" rel="noopener">https://docs.docker.com/</a><br>官网查找适合centos系统的docker-ce社区稳定版的安装方法。Community版？<br>安装基本工具；添加docker官方仓库，下载docker-ce本身的仓库使用官方地址即可，速度很快。无需指定版本，安装最新版docker-ce<br>启动docker。开机自动启动docker服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]# systemctl start docker</span><br><span class="line">[root@localhost home]# docker run hello-world</span><br><span class="line">Unable to find image &#39;hello-world:latest&#39; locally</span><br><span class="line">latest: Pulling from library&#x2F;hello-world</span><br><span class="line">1b930d010525: Pull complete</span><br><span class="line">Digest: sha256:4df8ca8a7e309c256d60d7971ea14c27672fc0d10c5f303856d7bc48f8cc17ff</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https:&#x2F;&#x2F;hub.docker.com&#x2F;</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https:&#x2F;&#x2F;docs.docker.com&#x2F;get-started&#x2F;</span><br><span class="line"></span><br><span class="line">[root@localhost home]#</span><br></pre></td></tr></table></figure>
<h3 id="2019-11-26-11-Docker-Images"><a href="#2019-11-26-11-Docker-Images" class="headerlink" title="2019.11.26 - 11.Docker Images"></a>2019.11.26 - 11.Docker Images</h3><ul>
<li><strong>docker官方镜像仓库国内速度慢，基于vi修改配置文件，</strong>  </li>
</ul>
<p><code>[root@localhost docker]# vi  /etc/docker/daemon.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;dockerhub.azk8s.cn&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用微软Azure仓库<a href="https://dockerhub.azk8s.cn，我这拉取500MB镜像1分钟。基本满速。服务器在国外的不要配。其他仓库要么需要密钥，要么已作废" target="_blank" rel="noopener">https://dockerhub.azk8s.cn，我这拉取500MB镜像1分钟。基本满速。服务器在国外的不要配。其他仓库要么需要密钥，要么已作废</a></p>
<ul>
<li><p><strong>重新加载配置，重启docker</strong><br><code># systemctl status docker.restart</code></p>
<br></li>
<li><p><strong>Docker基本命令：拉取镜像；列出本地镜像；删除镜像；</strong><br>不建议在本地查询，去官方网站查询更方便<br><code># docker pull [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]</code> 拉取镜像<br><code># docker images</code>:列出本地镜像<br><code># docker image rm [选项] &lt;镜像1&gt; [&lt;镜像2&gt; ...]</code>:删除本地镜像╰(*°▽°*)╯<br><code>#docker ps -a</code>:查看所有容器记录（包括未运行的容器）</p>
<br></li>
<li><p><strong>不用拉取hello-world测试，直接拉取最新的openjdk</strong><br>如果出现Error response from daemon，说明centos DNS域名解析错误，修改系统DNS解析地址为Google的域名服务器<br><code># docker pull openjdk</code></p>
</li>
<li><p><strong>Docker仓库？docker镜像仓库？</strong><br>仓库（Repository）是集中存放镜像的地方，分为公共仓库和私有仓库。</p>
</li>
</ul>
<h3 id="2019-11-26-12-Docker-Container"><a href="#2019-11-26-12-Docker-Container" class="headerlink" title="2019.11.26 - 12.Docker Container"></a>2019.11.26 - 12.Docker Container</h3><h4 id="Docker-run"><a href="#Docker-run" class="headerlink" title="Docker run"></a>Docker run</h4><p>Docker命令：基于指定镜像创建容器；列出全部已创建的容器；停止运行容器；删除容器。容器ID使用hash值的前2位即可<br>run基本参数：-p；-v；-d；-i；-t；–rm<br><kbd>-p：指定要映射的IP和端口，但是在一个指定端口上只可以绑定一个容器</kbd></p>
<blockquote>
<p>支持的格式有 <code>hostPort:containerPort</code>、<code>ip:hostPort:containerPort</code>、 <code>ip::containerPort</code>。</p>
<blockquote>
<ul>
<li><strong>hostPort:containerPort（映射所有接口地址）</strong><br>将本地的 5000 端口映射到容器的 5000 端口，可以执行如下命令：<br><code>$ sudo docker run -d -p 5000:5000 training/webapp python app.py</code><br>此时默认会绑定本地所有接口上的所有地址。</li>
<li><strong>ip:hostPort:containerPort （映射指定地址的指定端口）</strong><br>指定映射使用一个特定地址，比如 localhost 地址 127.0.0.1<br><code>$ sudo docker run -d -p 127.0.0.1:5000:5000 training/webapp python app.py</code></li>
<li><strong>ip::containerPort （映射指定地址的任意端口）</strong><br>绑定 localhost 的任意端口到容器的 5000 端口，本地主机会自动分配一个端口。<br><code>sudo docker run -d -p 127.0.0.1::5000 training/webapp python app.py</code><br>还可以使用 udp 标记来指定 udp 端口<br><code>$ sudo docker run -d -p 127.0.0.1:5000:5000/udp training/webapp python app.py</code></li>
</ul>
</blockquote>
</blockquote>
<p><kbd>-P：Docker 会随机映射一个 49000~49900 的端口到内部容器开放的网络端口<br><kbd>-v：挂载宿主机的一个目录<br><kbd>-d：让 Docker 在后台运行而不是直接把执行命令的结果输出在当前宿主机下</kbd></kbd></kbd></p>
<blockquote>
<p>使用 -d 参数启动后会返回一个唯一的 id，也可以通过 <code>docker container ls</code> 命令来查看容器信息。<br>要获取容器的输出信息，可以通过<code>docker container logs</code> 命令</p>
</blockquote>
<p><kbd>-i</kbd>:交互式操作，让容器的标准输入保持打开<br><kbd>-t：让Docker分配一个伪终端并绑定到容器的标准输入上<br><kbd>--rm：    退出时自动删除容器</kbd></kbd></p>
<p>创建容器时，追加在容器启动后，容器内执行操作指令<br>在/home/用户名/test下，创建HelloWorld.java<br><code># vi HelloWorld.java</code></p>
<p>基于openjdk创建一个容器：挂载home/用户名/test/目录到容器内的/home/code/目录，<br>即可以在容器中访问挂载目录中的文件；测试用，创建运行完就删除容器；<br>在前台运行，即显示容器中的输出，后台运行看不到输出；添加容器内java直接运行挂载目录下的HelloWorld的命令</p>
<p><code># docker run -it -v /home/Rice/test/:/home/code/ --rm openjdk  sh -c &quot;cd /home/code &amp;&amp;java HelloWorld.java&quot;</code></p>
<p><code>#docker run -v  /home/Rice/test/:/home/code/ --rm openjdk java home/code/HelloWorld.java</code><br>当容器中没有运行的进程时，容器将关闭。tomcat/MySQL/Nginx等带服务进程的容器会一直运行，<br>而普通openjdk的容器运行即关闭，除非运行像带web容器的springboot<br>如何创建一个不关闭的openjdk容器？<br>创建一个openjdk容器：依然挂载以上目录；启动标准输入，<br>启动终端控制台；在后台运行；在容器内运行/bin/bash。即，创建一个一直运行的进程，使容器不会关闭；<br><code># docker run -it -v /home/Rice/test:/home/code --rm openjdk /bin/bash</code><br>查看容器是否为运行状态<br><code>#docker ps -a</code></p>
<h4 id="Docker-exec"><a href="#Docker-exec" class="headerlink" title="Docker exec"></a>Docker exec</h4><p>exec基本参数：-i；-t。结合/bin/bash使用<br>以可互交的带终端的模式，进入之上创建的后台运行的，未停止的openjdk容器<br>在容器内进入挂载目录，运行HelloWorld，查看输出<br>查看容器内系统版本？查看镜像/容器信息？查看镜像/容器占用？<br>先启动<br><code>docker run -it -d -v /home/Rice/test:/home/code openjdk sh -c &quot;/bin/bash&quot;</code><br>进入容器（exec 不会停止 attach 会停止）<br><code>docker exec -it b4e /bin/bash</code></p>
<p><code>cat /etc/issue</code><br><code>docker inspect  [id/name]</code> 容器id/镜像id查看容器镜像的详细信息。<br><code>docker images [id/name]</code>：查看镜像信息<br><code>ps -ef | grep 8dac6ac683f5</code>:查看镜像/容器占用  </p>
<h3 id="2019-11-26-13-FirewallD-amp-Services"><a href="#2019-11-26-13-FirewallD-amp-Services" class="headerlink" title="2019.11.26 - 13.FirewallD &amp; Services"></a>2019.11.26 - 13.FirewallD &amp; Services</h3><p><strong>CentOS集成的firewall工具。</strong><br>FirewallD 提供了支持网络/防火墙区域(zone)定义网络链接以及接口安全等级的动态防火墙管理工具。<br><strong>ports？firewall zone？使用默认的zone-public无需声明</strong><br>端口可以映射到另一个端口以及/或者其他主机。<br>firewall zone：<br>从不信任到信任的顺序排序</p>
<ul>
<li><code>drop</code>：丢弃，丢弃所有进入的包，而不给出任何响应</li>
<li><code>block</code>：阻塞，拒绝所有外部发起的连接，允许内部发起的连接</li>
<li><code>public</code>：公开，允许指定的进入连接</li>
<li><code>external</code>：外部，同上，对伪装的进入连接，一般用于路由转发</li>
<li><code>dmz</code>：隔离区，允许受限制的进入连接</li>
<li><code>work</code>:工作，允许受信任的计算机被限制的进入连接，类似 workgroup</li>
<li><code>home</code>：家庭，上，类似 homegroup</li>
<li><code>internal</code>：内部，同上，范围针对所有互联网用户</li>
<li><code>trusted</code>：受信任的，信任所有连接</li>
</ul>
<p>列出firewall所有打开服务与端口等信息，这一个命令就够所有查询了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查看所有信息</span><br><span class="line"># firewall-cmd --list-all</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询所有开放的端口。本次运行</span><br><span class="line"># firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>
<p><strong>防火墙重载；永久开启http服务；永久打开80端口；永久关闭服务；永久关闭端口。firewall规则为动态添加，改变规则后需重载，无需重启</strong></p>
<ul>
<li><p>防火墙重载：<br><code>firewall-cmd --reload</code></p>
</li>
<li><p>firewall http 永久服务开启：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --query-service http               ##查看http服务是否支持，返回yes或者no</span><br><span class="line">firewall-cmd --add-service=http                 ##临时开放http服务</span><br><span class="line">firewall-cmd --add-service=http --permanent     ##永久开放http服务</span><br><span class="line">firewall-cmd --reload                           ##重载防火墙生效</span><br></pre></td></tr></table></figure></li>
<li><p>开放某个端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开放某个端口，立即生效。本次运行</span></span><br><span class="line">firewall-cmd --add-port=80/tcp</span><br></pre></td></tr></table></figure></li>
<li><p>永久开放某个端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开放某个端口，重新加载配置后生效。持久</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent</span><br></pre></td></tr></table></figure>
<p><code>-zone #作用域</code><br><code>-add-port=80/tcp #添加端口，格式为：端口/通讯协议</code><br><code>–permanent #永久生效，没有此参数重启后失效</code><br><code>systemctl restart firewalld.service</code></p>
</li>
</ul>
<ul>
<li>永久关闭某个端口、服务<br>将上述开启过程中的<code>--add</code>改为 <code>--remove</code></li>
</ul>
<p><strong>查看一个服务的状态。一个服务的启动/停止/启动/禁用。基于firewalld操作</strong><br>查看状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --service=&lt;service&gt; --state</span><br></pre></td></tr></table></figure>
<p>启用服务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd [--zone=&lt;zone&gt;] --add-service=&lt;service&gt; [--timeout=&lt;seconds&gt;]</span><br></pre></td></tr></table></figure>

<p>#停止：<br>禁止：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd [--zone=&lt;zone&gt;] --remove-service=&lt;service&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2019-11-26-14-Docker-Web-Container"><a href="#2019-11-26-14-Docker-Web-Container" class="headerlink" title="2019.11.26 - 14.Docker Web Container"></a>2019.11.26 - 14.Docker Web Container</h3><p><strong>在宿主机，通过scp命令将本地文件上传到服务器。注意，虚拟机网络为NAT模式，需显式声明ssh映射的端口，但参数与ssh命令不同</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp local_file remote_username@remote_ip:remote_folder</span><br></pre></td></tr></table></figure>
<p><KBD>-r</KBD>：拷贝文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F:\&gt;scp ./miniprogram.txt root@192.168.56.1:/home/Rice</span><br></pre></td></tr></table></figure>
<p><strong>创建目录，/home/用户名/services/。services下按应用创建目录<br>将/github/resources/docker-examples.war文件下载到本地，再上传到/home/用户名/services/docker-tomcat/。目录需先创建</strong></p>
<p><strong>拉取最新tomcat镜像。</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tomcat</span><br></pre></td></tr></table></figure>
<p>默认暴露的端口？部署路径？集成的openjdk版本？查看镜像信息？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;8080&#x2F;tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>"/usr/local/tomcat",```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#96;集成了openjdk1.8&#96;</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;shell</span><br><span class="line">docker inspect tomcat</span><br></pre></td></tr></table></figure>
<p><strong>基于命令行创建一个容器：映射服务器80端口到容器的8080端口；挂载docker-examples.war所在目录到容器中的部署目录；后台运行</strong><br>创建容器 映射服务器80端口到容器8080端口<br>cp method:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:8080 tomcat</span><br><span class="line">docker cp /home/Rice/services/docker-tomcat/docker-examples.war bc9:/usr/local/tomcat/webapps</span><br></pre></td></tr></table></figure>
<p><strong>mount method:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -d -v /home/Rice/services/docker-tomcat/:/usr/local/tomcat/webapps -p 80:8080 tomcat</span><br></pre></td></tr></table></figure>
<p><kbd>  注意是！挂载目录！<kbd> </kbd></kbd></p>
<p>查看容器是否创建/启动成功。容器中的tomcat自动在挂载目录解压war包部署<br>在虚拟机添加端口，例如8888，映射虚拟机的80端口<br>在宿主浏览器，本地+端口+部署在tomcat应用的名称，访问应用</p>
<p><a href="https://github.com/firewalld/firewalld/issues/461" target="_blank" rel="noopener">https://github.com/firewalld/firewalld/issues/461</a><br>创建容器时在服务器映射的端口，即使服务器firewall没有开启服务或端口，外部依然可以直接访问？</p>
<blockquote>
<p>在Linux上，Docker操纵<code>iptables</code>规则以提供网络隔离。这是一个实现细节，您不应修改Docker插入<code>iptables</code>策略中的规则。</p>
</blockquote>
<p>停止，并删除此容器。命令写在一行执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker stop CONTAINER ID)</span><br></pre></td></tr></table></figure>
<p>注意，服务器的一个端口只能被一个应用/容器监听，反复创建容器会端口冲突</p>
<h3 id="2019-11-26-15-Dockerfile"><a href="#2019-11-26-15-Dockerfile" class="headerlink" title="2019.11.26 - 15.Dockerfile"></a>2019.11.26 - 15.Dockerfile</h3><p><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener">https://docs.docker.com/develop/develop-images/dockerfile_best-practices/</a><br><a href="https://yeasy.gitbooks.io/docker_practice/image/dockerfile/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/image/dockerfile/</a><br><strong>理解docker image layers的设计。优点？</strong></p>
<ul>
<li><p>共享使镜像更小</p>
</li>
<li><p>复制使得容器更高效</p>
</li>
</ul>
<h4 id="1-layer的理解"><a href="#1-layer的理解" class="headerlink" title="1. layer的理解"></a>1. layer的理解</h4><p>  镜像(image)和容器(container)都是基于层(layer)的</p>
<p>  <code>Docker</code>的镜像是由一系列只读层组成的一个栈，上面的层依赖其下面的层，这些层从外面看起来是一个整体。栈底的镜像被称作基础镜像(base image)，所有上面的层都基于这个基础镜像。</p>
<p>  当你在一个容器中进行了某些操作比如添加了一个文件，然后调用<code>docker commit</code>操作创建新的镜像时，<code>Docker</code>会在镜像栈的最上面创建一个新的层，这个层包含了新添加的文件。<br>  或者，通过<code>Dockerfile</code>创建新的镜像时，通过FROM指令指定的就是基础镜像。此后的每条指令都会创建一个新的层，层中包含了这条指令对镜像的修改。</p>
<p>  容器<code>container</code>不仅包含镜像的所有层，它还在最上面添加了一个可读层称作容器层<code>container layer</code>。下面是一个基于<code>ubuntu:15.04</code>运行起来的容器的层之间的关系：</p>
<p>  <img src="https://img-blog.csdn.net/20170419135324953" alt="img"></p>
<p>  容器与镜像的主要区别就在于这个可写层(writable layer),对容器的所有写操作无论是添加新内容还是修改原来的内容都会保存在这个可读层中。如果容器被删除，writable layer也会被删除，但镜像层不变。<br>  正是因为每个镜像都有自己的可写层，所以容器之间可以共享同一个镜像的各层。下面是多个容器使用同一个镜像的例子：</p>
<p>  <img src="https://img-blog.csdn.net/20170419135439094" alt="img"></p>
<p><strong>按官方文档，掌握最基本的FROM RUN CMD COPY ADD指令。每执行一条指令意味着什么？COPY与ADD的区别？</strong>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:18.04</span><br><span class="line">COPY . &#x2F;app</span><br><span class="line">RUN make &#x2F;app</span><br><span class="line">CMD python &#x2F;app&#x2F;app.py</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>FROM</code>从<code>ubuntu:18.04</code>Docker映像创建一个图层。</p>
</li>
<li><p><code>COPY</code> 从Docker客户端的当前目录添加文件。</p>
</li>
<li><p><code>RUN</code>使用构建您的应用程序make。</p>
</li>
<li><p><code>CMD</code> 指定在容器中运行什么命令。</p>
</li>
<li><p><code>ADD</code> 更偏向于文件的解压</p>
</li>
</ul>
<p><strong>在/home/用户名/services/dockers-tomcat/下，编写一个Dockerfile，<br>基于tomcat镜像，将docker-examples.war文件复制到部署路径下。注意，copy指令，只能指定相对于dockerfile的相对路径，不能使用基于根的绝对路径<br>是否需要声明暴露端口？理解layer</strong><br>Dockerfile</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM tomcat</span><br><span class="line">COPY  ./docker-examples.war /usr/local/tomcat/webapps/</span><br></pre></td></tr></table></figure>

<p><code>docker bulid .</code><br>点很重要</p>
<ul>
<li><p>不需要声明暴露端口<br>要将<code>EXPOSE</code>和在运行时使用<code>-p &lt;宿主端口&gt;:&lt;容器端口&gt;</code>区分开来。<code>-p</code>，是映射宿主端口和容器端口，换句话说，就是将容器的对应端口服务公开给外界访问，而<code>EXPOSE</code>仅仅是声明容器打算使用什么端口而已，并不会自动在宿主进行端口映射。</p>
</li>
<li><p><em>layer的概念：</em><br>Docker 镜像是由多个文件系统（只读层）叠加而成，每个层仅包含了前一层的差异部分。当我们启动一个容器的时候，Docker 会加载镜像层并在其上添加一个可写层。容器上所做的任何更改，譬如新建文件、更改文件、删除文件，都将记录与可写层上。容器层与镜像层的结构如下图所示。</p>
</li>
</ul>
<p><strong>基于文件构建镜像，声明repository仓库名称，注意结尾标识符。repository的官方命名标准？<br>查看镜像是否构建。查看镜像信息?</strong></p>
<p>这里的<code>Repository</code>是指镜像全名在冒号:之前的部分，<br>冒号:之后的部分是镜像的标签（tag），用来区分镜像的版本。 如名为<code>my-app:3.1.4</code>的镜像，<code>my-app</code>就是镜像的 Repository 部分。<br>Repository又可以用斜杠<code>/</code>分隔开，<code>/</code>之前的部分是可选的DNS格式的主机名。主机名必须符合DNS规则，但 <strong>不得</strong> 包含下划线<code>_</code>字符，主机名可以有如<code>：8080</code>格式的端口号。<br>镜像名可以包含小写字符，数字和分隔符。 分隔符是句点.，一个或两个下划线_，或一个或多个短横线-，镜像名<strong>不允许</strong>以分隔符开头或结尾。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker pull 注册服务器的仓库名&#x2F;镜像名:Tag</span><br><span class="line">## 例如：</span><br><span class="line"># docker pull registry.hub.docker.com&#x2F;ubuntu:latest</span><br><span class="line"># docker pull dl.dockerpool.com:5000&#x2F;ubuntu</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当不使用Tag的时候，默认会使用latest进行标记。</p>
</blockquote>
<p><strong>基于自定义构建的镜像创建容器。与之前的创建命令相比，需要什么参数？</strong><br>需要指定dockerfile的位置<br>./URL/-f</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Dockerfile一般位于构建上下文的根目录下，也可以通过-f指定该文件的位置：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker build -f /path/to/a/Dockerfile .</span></span><br><span class="line"><span class="meta">#</span><span class="bash">构建时，还可以通过-t参数指定构建成后，镜像的仓库、标签等：</span></span><br><span class="line">docker build -f  Dockerfile.test -t image-train-test .</span><br></pre></td></tr></table></figure>

<p>先学习基本镜像构建。其他指令，构建过程优化，后期讨论。不讨论基于容器的镜像构建  </p>
<h3 id="2019-11-26-16-Docker-compose"><a href="#2019-11-26-16-Docker-compose" class="headerlink" title="2019.11.26 - 16.Docker compose"></a>2019.11.26 - 16.Docker compose</h3><h4 id="1-Orchestration-System？"><a href="#1-Orchestration-System？" class="headerlink" title="1. Orchestration System？"></a>1. Orchestration System？</h4><p> 编排是指一次性自动执行多项任务编排系统，简化并优化重复性的频发流程，以确保准确、快速的软件部署</p>
<h4 id="2-为什么需要Docker-Compose？优点？"><a href="#2-为什么需要Docker-Compose？优点？" class="headerlink" title="2. 为什么需要Docker Compose？优点？"></a>2. 为什么需要Docker Compose？优点？</h4><p><code>Docker Compose</code> 是 Docker 官方编排（Orchestration）项目之一，负责快速的部署分布式应用。<code>Compose</code> 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的快速编排。</p>
<p><code>Compose</code> 恰好满足了这样的需求。它允许用户通过一个单独的 <code>docker-compose.yml</code> 模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。</p>
<h4 id="3-k8s-Kubernetes-？k8s与官方docker-compose的适用场景？"><a href="#3-k8s-Kubernetes-？k8s与官方docker-compose的适用场景？" class="headerlink" title="3. k8s(Kubernetes)？k8s与官方docker compose的适用场景？"></a>3. k8s(Kubernetes)？k8s与官方docker compose的适用场景？</h4><p>K8S，就是基于容器的集群管理平台。</p>
<p>Docker Compose是单机管理Docker的，Kubernetes是多节点管理Docker的</p>
<h4 id="4-编写docker-compose文件的最大最大特点？"><a href="#4-编写docker-compose文件的最大最大特点？" class="headerlink" title="4. 编写docker-compose文件的最大最大特点？"></a>4. 编写docker-compose文件的最大最大特点？</h4><p>批量操作！</p>
<p><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">https://docs.docker.com/compose/</a>  </p>
<h4 id="5-按官网教程安装最新版，添加执行权限"><a href="#5-按官网教程安装最新版，添加执行权限" class="headerlink" title="5. 按官网教程安装最新版，添加执行权限"></a>5. 按官网教程安装最新版，添加执行权限</h4><blockquote>
<p>对于<code>alpine</code>，需要以下依赖包： <code>py-pip</code>，<code>python-dev</code>，<code>libffi-dev</code>，<code>openssl-dev</code>，<code>gcc</code>，<code>libc-dev</code>，和<code>make</code>。</p>
</blockquote>
<ol>
<li><p>运行以下命令以下载Docker Compose的当前稳定版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L "https://github.com/docker/compose/releases/download/1.25.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure></li>
<li><p>将可执行权限应用于二进制文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure></li>
<li><p>测试安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version</span><br><span class="line">docker-compose version 1.25.0, build 0a186604</span><br></pre></td></tr></table></figure>


</li>
</ol>
<p>基于vi在/home/用户名/services/docker-tomcat/下，编写一个docker-compose文件，基于第3版，服务名称自定义。将14Docker Web Container，基于命令行创建容器的命令，转为在文件中描述，包括tomcat基础镜像，挂载目录，映射端口<br>基于文件创建在后台运行的容器；</p>
<blockquote>
<p><code>version</code>：版本注释，不可缺少的字段。<br><code>services</code>：该层级下指明使用镜像开启容器的具体配置，是最主要的配置项。<br><code>flask-web、redis、web</code>：自定义的该service名字。<br><code>build</code>：Dockerfile的路径，使用它来创建一个定制的镜像，或者可使用image指定已有镜像。<br><code>image</code>：指定使用已有镜像。<br><code>ports</code>：开启容器后暴露的端口映射。<br><code>container_name</code>:指定开启容器后的容器名。</p>
</blockquote>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">'3'</span></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"80:8080"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>停止/停止删除基于文件创建的容器  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose stop</span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure>

<p>查看编排内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps</span><br></pre></td></tr></table></figure>

<p>查看容器日志，错误时可查看  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose logs</span><br><span class="line">docker inspect iamage-name</span><br></pre></td></tr></table></figure>

<h3 id="最终部署使用"><a href="#最终部署使用" class="headerlink" title="最终部署使用"></a>最终部署使用</h3><ol>
<li>使用<code>docker-compose config</code>检查语法是否错误</li>
<li>使用<code>docker-compose up -d</code>后台启动服务，过程中会自动根据Dockerfile创建镜像，并且按要求启动服务</li>
<li>使用<code>docker-compose logs</code>检查运行状态</li>
<li>检查项目是否正常运行：<code>curl 127.0.0.1:5000</code>，每次访问能收到变化的数据证明项目部署已经成功完成。</li>
</ol>
<p>注意，严格的缩进与空格</p>
<h1 id="docker安装MySQL8"><a href="#docker安装MySQL8" class="headerlink" title="docker安装MySQL8+"></a>docker安装MySQL8+</h1><p>1、<code>docker pull mysql</code>(# 由于当时最新版是mysql8.0,就不用写版本号tag了)</p>
<p>2、<code>docker run -p 3306:3306 --name MYSQL8.0 -e MYSQL_ROOT_PASSWORD=root -d mysql:latest</code></p>
<ul>
<li><p>-p 3306:3306：将容器内的3306端口映射到实体机3306端口</p>
</li>
<li><p>--name MYSQL8.0：给这个容器取一个容器记住的名字</p>
</li>
<li><p>-e MYSQL_ROOT_PASSWORD=123456：docker的MySQL默认的root密码是随机的，这是改一下默认的root用户密码</p>
</li>
<li><p>-d mysql:latest：在后台运行mysql:latest镜像产生的容器</p>
</li>
</ul>
<p>新装了mysql8.0后再用navicat链接就会报2059的错误。</p>
<p>上网查了发现是8.0之后mysql更改了密码的加密规则，只要在命令窗口把加密方法改回去即可。</p>
<p>3、<code>docker exec -it MYSQL8.0 bash</code> <code>mysql -uroot -proot</code></p>
<p>4、改回原来方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter user &#39;root&#39;@&#39;%&#39; identified by &#39;root&#39; password expire never;</span><br><span class="line">alter user &#39;root&#39;@&#39;%&#39; identified with mysql_native_password by &#39;root&#39;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3306:3306 --name MYSQL8.0 -e MYSQL_ROOT_PASSWORD=root -d mysql --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line"><span class="meta">#</span><span class="bash">所有表的默认编码和排序规则以使用UTF-8</span></span><br></pre></td></tr></table></figure>



<h1 id="DOCKERFILE-dockerfile"><a href="#DOCKERFILE-dockerfile" class="headerlink" title="DOCKERFILE dockerfile"></a>DOCKERFILE dockerfile</h1><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> tomcat</span><br><span class="line"><span class="keyword">MAINTAINER</span> TanWentao &lt;<span class="number">1079966197</span>@qq.com&gt;</span><br><span class="line"><span class="keyword">ENV</span> WORK_PATH /usr/local/tomcat/conf</span><br><span class="line"><span class="comment">#定义要替换的server.xml文件名</span></span><br><span class="line"><span class="keyword">ENV</span> SERVER_CONF_FILE_NAME server.xml</span><br><span class="line"><span class="comment">#删除原文件server.xml</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> rm <span class="variable">$WORK_PATH</span>/<span class="variable">$SERVER_CONF_FILE_NAME</span></span></span><br><span class="line"><span class="comment">#复制文件server.xml</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash">  ./<span class="variable">$SERVER_CONF_FILE_NAME</span> <span class="variable">$WORK_PATH</span>/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash">  ./BakaRiceHome-1.0-SNAPSHOT.war /usr/<span class="built_in">local</span>/tomcat/webapps/</span></span><br></pre></td></tr></table></figure>



<h2 id="dockerfile-springboot"><a href="#dockerfile-springboot" class="headerlink" title="dockerfile springboot"></a>dockerfile springboot</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">11</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> TanWentao &lt;<span class="number">1079966197</span>@qq.com&gt;</span><br><span class="line"><span class="comment"># 用于指定持久化目录</span></span><br><span class="line"><span class="comment">#VOLUME /tmp</span></span><br><span class="line"><span class="comment"># 将本地文件添加到容器中</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> birthday.jar app.jar</span></span><br><span class="line"><span class="comment"># 指定于外界交互的端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="comment"># 配置容器，使其可执行化</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="built_in">exec</span> java <span class="variable">$JAVA_OPTS</span> -jar /app.jar</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/%E5%85%B3%E4%BA%8ENeo4j%E9%82%A3%E7%82%B9%E4%BA%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/%E5%85%B3%E4%BA%8ENeo4j%E9%82%A3%E7%82%B9%E4%BA%8B/" class="post-title-link" itemprop="url">关于Neo4j那"点"事</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 18:32:51 / 修改时间：18:52:22" itemprop="dateCreated datePublished" datetime="2020-03-18T18:32:51+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是Neo4j？What-is-Neo4j-Neo4j-は-何-ですか"><a href="#什么是Neo4j？What-is-Neo4j-Neo4j-は-何-ですか" class="headerlink" title="什么是Neo4j？What is Neo4j? Neo4j は 何 ですか?"></a>什么是Neo4j？What is Neo4j? Neo4j は 何 ですか?</h2><p>提到neo4j，最开始的我可以说是一脸懵逼，如果你告诉我，你连neo4j都不知道？他就是现在最有名的图数据库之一啊！很强大的。那我可能会陷入一个递归（或者准确说是迭代？）查找，</p>
<p><kbd>什么是neo4j?<kbd>-><kbd>什么是图数据库?<kbd>-><kbd>什么是NoSQL?<kbd></kbd></kbd></kbd></kbd></kbd></kbd></p>
<ol>
<li>我们先来解决第一个问题，什么是neo4j？</li>
</ol>
<blockquote>
<p><a href="https://baike.baidu.com/item/Neo4j" target="_blank" rel="noopener">Neo4j</a>是一个高性能的,NOSQL图形数据库，它将结构化数据存储在网络上而不是表中。它是一个<a href="https://baike.baidu.com/item/嵌入式/575465" target="_blank" rel="noopener">嵌入式</a>的、基于<a href="https://baike.baidu.com/item/磁盘/2842227" target="_blank" rel="noopener">磁盘</a>的、具备完全的事务特性的Java持久化引擎，但是它将结构化数据存储在网络(从数学角度叫做图)上而不是表中。Neo4j也可以被看作是一个高性能的图引擎，该引擎具有成熟数据库的所有特性。程序员工作在一个面向对象的、灵活的网络结构下而不是严格、静态的表中——但是他们可以享受到具备完全的事务特性、企业级的数据库的所有好处。</p>
</blockquote>
<ol start="2">
<li>什么是图形数据库？</li>
</ol>
<blockquote>
<p>图形<a href="https://baike.baidu.com/item/数据库/103728" target="_blank" rel="noopener">数据库</a>是NoSQL数据库的一种类型，它应用图形理论存储实体之间的关系信息。图形数据库是一种非关系型数据库，它应用图形理论存储实体之间的关系信息。最常见例子就是社会网络中人与人之间的关系。关系型数据库用于存储“关系型”数据的效果并不好，其查询复杂、缓慢、超出预期，而图形数据库的独特设计恰恰弥补了这个缺陷。</p>
</blockquote>
<ol start="3">
<li>什么是NoSQL?</li>
</ol>
<blockquote>
<p>NoSQL?  Not SQL？  Not Only SQL！</p>
<p>NoSQL(NoSQL = Not Only SQL )，意即"不仅仅是SQL"。这是对不同于传统的关系型数据库的数据库管理系统的统称。</p>
<p>NoSQL用于超大规模数据的存储。（例如谷歌或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。</p>
</blockquote>
<ol start="4">
<li>为什么用NoSQL?</li>
</ol>
<blockquote>
<p>今天我们可以通过第三方平台（如：Google,Facebook等）可以很容易的访问和抓取数据。用户的个人信息，社交网络，地理位置，用户生成的数据和用户操作日志已经成倍的增加。我们如果要对这些用户数据进行挖掘，那SQL数据库已经不适合这些应用了(如果要并十个表进行查询，那么笛卡尔积大爆炸BOOOM!), NoSQL 数据库的发展却能很好的处理这些大的数据。</p>
</blockquote>
<p>Oops！这里是免费薅羊毛书籍领取处！Free Ebook-O'Reilly Graph Databases</p>
<p>[点击此处薅我！]<a href="https://neo4j.com/graph-databases-book/" target="_blank" rel="noopener">https://neo4j.com/graph-databases-book/</a></p>
<hr>
<ul>
<li><p>节点：表示一个实体记录，就像关系数据库中的一条记录，一个节点包含多个属性和标签</p>
</li>
<li><p>关系：用于将节点关联起来构成图，关系也称为图论的边（Edge）</p>
</li>
<li><p>属性：节点和关系都可以有多个属性，属性是由键值对组成的，就像java中的哈希</p>
</li>
<li><p>标签：标签指示一组拥有相同属性的结点，但不强制要求相同，一个节点可以有多个标签</p>
</li>
<li><p>路径：图中任意两个节点都存在由关系组成的路径，路径有长短之分</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">S.No.</th>
<th align="left">CQL命令/条</th>
<th align="left">用法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1。</td>
<td align="left">CREATE 创建</td>
<td align="left">创建节点，关系和属性</td>
</tr>
<tr>
<td align="left">2。</td>
<td align="left">MATCH 匹配</td>
<td align="left">检索有关节点，关系和属性数据</td>
</tr>
<tr>
<td align="left">3。</td>
<td align="left">RETURN 返回</td>
<td align="left">返回查询结果</td>
</tr>
<tr>
<td align="left">4。</td>
<td align="left">WHERE 哪里</td>
<td align="left">提供条件过滤检索数据</td>
</tr>
<tr>
<td align="left">5。</td>
<td align="left">DELETE 删除</td>
<td align="left">删除节点和关系</td>
</tr>
<tr>
<td align="left">6。</td>
<td align="left">REMOVE 移除</td>
<td align="left">删除节点和关系的属性</td>
</tr>
<tr>
<td align="left">7。</td>
<td align="left">ORDER BY以…排序</td>
<td align="left">排序检索数据</td>
</tr>
<tr>
<td align="left">8。</td>
<td align="left">SET 组</td>
<td align="left">添加或更新标签</td>
</tr>
</tbody></table>
<h2 id="Cypher-查询语言"><a href="#Cypher-查询语言" class="headerlink" title="Cypher 查询语言"></a>Cypher 查询语言</h2><h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><h4 id="CREATE创建节点"><a href="#CREATE创建节点" class="headerlink" title="CREATE创建节点"></a><1>CREATE创建节点</1></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> (n:<span class="keyword">User</span> &#123;<span class="keyword">name</span>:<span class="string">"Dav"</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>这里<code>n</code>是变量名，<code>User</code>是标签（在图数据库里，标签可以理解为关系型数据库里的表table），花括号里面的是属性。</p>
<h4 id="CREATE创建关系："><a href="#CREATE创建关系：" class="headerlink" title="CREATE创建关系："></a><2>CREATE创建关系：</2></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n&#123;name:"a"&#125;),(m&#123;name:"b"&#125;) CREATE (n)-[r:KNOWS]-&gt;(m) return n,m</span><br></pre></td></tr></table></figure>



<p>这里做几点说明：</p>
<ul>
<li>小括号里是节点，<strong>节点也可以不带标签（不过不是好习惯）</strong>，方括号里是关系，关系的两边是两个节点，类似这样()-[]→()</li>
<li>MATCH 是查询语句关键字</li>
<li>return n,m 把两个节点返回 才能得到图</li>
</ul>
<h4 id="MERGR创建节点"><a href="#MERGR创建节点" class="headerlink" title="MERGR创建节点"></a><3>MERGR创建节点</3></h4><blockquote>
<p>用MERGE创建节点 MERGE和CREATE不同之处在于 MERGE等于MATCH + CREATE会先创建前会在数据库里检查有没有这个节点。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">MERGE</span> (n:<span class="keyword">Test</span>&#123;<span class="keyword">name</span>:<span class="string">"c"</span>&#125;) <span class="keyword">ON</span> <span class="keyword">CREATE</span> <span class="keyword">SET</span> n.created = <span class="built_in">timestamp</span>() <span class="keyword">return</span> n</span><br></pre></td></tr></table></figure>

<p>首先检查Test标签，属性为name的值的节点c是否存在，存在使用已有节点，否则创建一个新的节点。</p>
<p>用<code>MERGE</code>创建节点，还用了一个SET关键字，这个是改变节点的属性，属于"改"的范围</p>
<h4 id="MERGE-创建关系"><a href="#MERGE-创建关系" class="headerlink" title="MERGE 创建关系"></a>MERGE 创建关系</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (A:Person&#123;name:'Joel Silver'&#125;),(b:Person&#123;name:'J.T.Walsh'&#125;) MERGE (a)-[r:LOVES]-&gt;(b)</span><br></pre></td></tr></table></figure>

<p>匹配出名字叫Joel的人和J.T的人建立关系LOVES。</p>
<p>用合并的方式建立关系，先检测关系存不存在，若存在则不修改任何数据，否则创建新的关系。</p>
<hr>
<h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><h4 id="DELETE关键字可以删除数据："><a href="#DELETE关键字可以删除数据：" class="headerlink" title="DELETE关键字可以删除数据："></a>DELETE关键字可以删除数据：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n) <span class="keyword">DELETE</span> n</span><br></pre></td></tr></table></figure>

<p>会报错，必须删除关系才能删除节点。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH ()-[r:朋友]-&gt;(m) DELETE r,m</span><br></pre></td></tr></table></figure>

<p>查找出朋友关系r以及朋友所指向的节点m，并同时把r和m删除。</p>
<h4 id="REMOVE也可以删除数据"><a href="#REMOVE也可以删除数据" class="headerlink" title="REMOVE也可以删除数据"></a>REMOVE也可以删除数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n) REMOVE n:Test</span><br></pre></td></tr></table></figure>

<p>用<code>REMOVE</code>来移除数据，移除带有所有Test标签的所有结点</p>
<p><strong>！！ REMOVE不会像DELETE，因为这个节点有其他关系而报错不执行，这个节点被删除后，关系会指向空节点</strong></p>
<h3 id><a href="#" class="headerlink" title></a></h3><hr>
<h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><p>使用<code>SET</code>去更改节点</p>
<hr>
<h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><p>使用<code>MATCH</code>去查询节点。</p>
<h4 id="缩小范围方法"><a href="#缩小范围方法" class="headerlink" title="缩小范围方法"></a>缩小范围方法</h4><ul>
<li><p><code>MATCH p=()-[r:LOVES]-&gt;() RETURN p LIMIT 25</code></p>
</li>
<li><p><code>WHERE</code>实现条件过滤<code>MATCH p=(n:Person)-[:LOVES]-&gt;() WHERE n.name &lt;&gt; &quot;a RETURN p</code>:查询节点n的属性name不等于a的所有节点<>表示不等于</p>
</li>
<li><p>使用INDEX索引：使用关键字INDEX ON 为节点的属性name创建一个普通的索引<code>CREATE INDEX ON :Person(name)</code></p>
<p><code>MATCH (n:Person) WHERE n.name IN [&quot;a&quot;,&quot;b&quot;] RETURN n as Person</code>索引查询</p>
<p><code>MATCH(n:Person) USING INDEX n:Person(name) WHERE n.name = &#39;a&#39; RETURN n as Person</code>:显式使用索引查询</p>
<p><code>DROP INDEX ON :Person(name)</code>使用<code>DROP</code>关键字删除一个已经存在的索引</p>
</li>
</ul>
<h4 id="demo设计"><a href="#demo设计" class="headerlink" title="demo设计"></a>demo设计</h4><hr>
<p>neo4j</p>
<p>1、用户便签属性</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>代码名称</th>
</tr>
</thead>
<tbody><tr>
<td>用户昵称</td>
<td>userName</td>
</tr>
<tr>
<td>用户手机号</td>
<td>userTelNum</td>
</tr>
<tr>
<td>用户邮箱</td>
<td>userEmail</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>2、老友圈标签属性</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>代码名称</th>
</tr>
</thead>
<tbody><tr>
<td>发布时间</td>
<td></td>
</tr>
<tr>
<td>发布内容</td>
<td></td>
</tr>
<tr>
<td>发布图片url</td>
<td></td>
</tr>
</tbody></table>
<p>MATCH (n:oldfriend{name:'老张'})-[r:<code>发布</code>]->() RETURN r LIMIT 25</p>
<p>MATCH (n:oldfriend{name:'老张'})-[r:follow]->() -[r:<code>发布</code>]->(n:<code>老友圈</code>)RETURN r LIMIT 25</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n:oldfriend&#123;name:'老张'&#125;)-[follow]-&gt;(:oldfriend) -[r:'发布']-&gt;(n:'老友圈')RETURN n LIMIT 25</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n:oldfriend&#123;name:&#39;老张&#39;&#125;)-[follow]-&gt;(:oldfriend) -[r:&#96;发布&#96;]-&gt;(p:&#96;老友圈&#96;)RETURN p LIMIT 25</span><br></pre></td></tr></table></figure>

<p>查询 老张 关注的所有人发布的朋友圈</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (n:oldfriend&#123;name:'老张'&#125;)-[follow]-&gt;(:oldfriend) -[r:`发布`]-&gt;(p:`老友圈`) RETURN p order by p.time DESC LIMIT 25</span><br></pre></td></tr></table></figure>

<p>查询老张 所关注的所有人的朋友圈的前二十五条</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/Hexo-Init/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/Hexo-Init/" class="post-title-link" itemprop="url">Hexo Init</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 18:09:31 / 修改时间：18:20:05" itemprop="dateCreated datePublished" datetime="2020-03-18T18:09:31+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Hexo-博客建立"><a href="#Hexo-博客建立" class="headerlink" title="Hexo 博客建立"></a>Hexo 博客建立</h1><p>​    说来尴尬，自己一直是个比较有表达欲的人，但自己的博客始终没有建立， 在与朋友的一次聚会上，偶然看到了他的blog，感觉很是不错，自己也因此想要来“折腾折腾”,但前段时间一直忙于其他的事情，大创、安卓、Neoj4j相关的学习，博客的事情一直搁置了，再加上自己也从未对博客类有什么多的理解。想着自己搭建一个后端 用springboot，前端套个vue就成了。</p>
<p>​    今天下午就在写后端，刚刚把repository和services的大体结构做好，然后套上swagger，突发奇想，想着去康康朋友的博客，结果不看不知道，一看吓一跳啊…自己的知识还是太过于浅薄了。Hexo、Hugo等等简直不要太方便。现在有点欲哭无泪，不过还是准备把自己写了一半的 Java 博客系统给写完！毕竟做事要善始善终，而且写的过程也是全方位学习的过程。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rice March">
      <meta itemprop="description" content="个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="「Riceのこと」">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-18 17:37:14" itemprop="dateCreated datePublished" datetime="2020-03-18T17:37:14+08:00">2020-03-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rice March</p>
  <div class="site-description" itemprop="description">个人杂物箱、 关于编程、日语、生活和阳光 Long may the sunshine!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rice March</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
